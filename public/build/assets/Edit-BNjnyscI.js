import{q as A,r as m,c as p,h as o,u as a,i as E,j as v,d as t,s as $,w as d,f as c,F as B,g as z,t as h,v as M,z as R,k as f,m as S,A as U,x as G,p as I,l as P,B as q,e as H}from"./app-BoEdRX-Z.js";import{_ as O}from"./AuthenticatedLayout-DihgaMV2.js";import{_ as n,b as i,a as g}from"./TextInput-BqwqGtR7.js";import{P as J}from"./PrimaryButton-JLDc59ox.js";import{f as k,p as T}from"./formatNumber-CZPogZXQ.js";import"./ApplicationLogo-BrNAjZNc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"flex items-center gap-4"},Y={class:"py-6"},K={class:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8"},Q={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6"},X=["value"],Z={class:"mt-1"},ee={key:0,class:"mt-3 relative"},te=["src"],le={class:"grid grid-cols-3 gap-4"},ae={class:"grid grid-cols-2 gap-4"},oe={class:"mt-2 flex gap-4"},re={class:"flex items-center gap-2 cursor-pointer"},se={class:"flex items-center gap-2 cursor-pointer"},ie={class:"flex items-center gap-2 cursor-pointer"},ne={class:"flex items-center gap-2 cursor-pointer"},de=["disabled"],ue={key:0,class:"text-sm text-amber-600 dark:text-amber-400 mt-1"},ge={class:"flex justify-end gap-4"},be={__name:"Edit",props:{goal:Object,categories:Array,coreGoalsCount:Number},setup(u){const s=u,l=A({category_id:s.goal.category_id,title:s.goal.title,description:s.goal.description||"",slogan:s.goal.slogan||"",cover_image:null,remove_cover_image:!1,target_value:s.goal.target_value||"",current_value:s.goal.current_value||0,unit:s.goal.unit||"",start_date:s.goal.start_date||"2026-01-01",target_date:s.goal.target_date||"2026-12-31",priority:s.goal.priority,status:s.goal.status,is_pinned:s.goal.is_pinned,is_core_goal:s.goal.is_core_goal||!1}),V=H(()=>s.goal.is_core_goal||s.coreGoalsCount<3),w=m(s.goal.cover_image_url),y=m(null),C=m(null),x=m(k(s.goal.target_value)),b=m(k(s.goal.current_value)),F=()=>{l.target_value=T(x.value),x.value=k(l.target_value)},L=()=>{l.current_value=T(b.value),b.value=k(l.current_value)},j=_=>{const e=_.target.files[0];e&&(l.cover_image=e,l.remove_cover_image=!1,y.value=URL.createObjectURL(e))},D=()=>{l.cover_image=null,l.remove_cover_image=!0,y.value=null,w.value=null,C.value&&(C.value.value="")},N=()=>{q.post(route("goals.update",s.goal.id),{_method:"put",...l.data()},{forceFormData:!0})};return(_,e)=>(c(),p(B,null,[o(a(E),{title:`Edit: ${u.goal.title}`},null,8,["title"]),o(O,null,{header:v(()=>[t("div",W,[o(a(P),{href:_.route("goals.show",u.goal.id),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:v(()=>[...e[15]||(e[15]=[f(" â† Back ",-1)])]),_:1},8,["href"]),e[16]||(e[16]=t("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200"}," Edit Goal ",-1))])]),default:v(()=>[t("div",Y,[t("div",K,[t("div",Q,[t("form",{onSubmit:$(N,["prevent"]),class:"space-y-6"},[t("div",null,[o(n,{for:"category_id",value:"Category"}),d(t("select",{id:"category_id","onUpdate:modelValue":e[0]||(e[0]=r=>a(l).category_id=r),class:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-indigo-500 focus:ring-indigo-500",required:""},[(c(!0),p(B,null,z(u.categories,r=>(c(),p("option",{key:r.id,value:r.id},h(r.icon)+" "+h(r.name),9,X))),128))],512),[[M,a(l).category_id]]),o(i,{message:a(l).errors.category_id,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"title",value:"Title"}),o(g,{id:"title",modelValue:a(l).title,"onUpdate:modelValue":e[1]||(e[1]=r=>a(l).title=r),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(i,{message:a(l).errors.title,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"description",value:"Description"}),d(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=r=>a(l).description=r),rows:"4",class:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Describe using: State + Vision + Action"},null,512),[[R,a(l).description]]),e[17]||(e[17]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400",title:"MÃ´ táº£ theo cÃ´ng thá»©c: Tráº¡ng thÃ¡i + HÃ¬nh áº£nh + HÃ nh Ä‘á»™ng"},[f(" ðŸ’¡ Tip: Use "),t("strong",null,"State + Vision + Action"),f(" formula to visualize your goal clearly ")],-1)),o(i,{message:a(l).errors.description,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"slogan",value:"Slogan"}),o(g,{id:"slogan",modelValue:a(l).slogan,"onUpdate:modelValue":e[3]||(e[3]=r=>a(l).slogan=r),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Run to live, live to run!"},null,8,["modelValue"]),e[18]||(e[18]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400",title:"CÃ¢u dáº«n Ä‘Æ°á»ng truyá»n cáº£m há»©ng"}," âœ¨ A short inspiring phrase for this goal ",-1)),o(i,{message:a(l).errors.slogan,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"cover_image",value:"Cover Image"}),t("div",Z,[t("input",{ref_key:"fileInput",ref:C,id:"cover_image",type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif,image/webp",onChange:j,class:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900 dark:file:text-indigo-300 dark:hover:file:bg-indigo-800"},null,544)]),o(i,{message:a(l).errors.cover_image,class:"mt-2"},null,8,["message"]),y.value||w.value?(c(),p("div",ee,[t("img",{src:y.value||w.value,alt:"Cover",class:"h-32 w-full object-cover rounded-lg"},null,8,te),t("button",{type:"button",onClick:D,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[...e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])):S("",!0),e[20]||(e[20]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Max 2MB. Formats: JPEG, PNG, GIF, WebP ",-1))]),t("div",le,[t("div",null,[o(n,{for:"target_value",value:"Target Value"}),o(g,{id:"target_value",modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=r=>x.value=r),type:"text",inputmode:"decimal",class:"mt-1 block w-full",onBlur:F},null,8,["modelValue"]),o(i,{message:a(l).errors.target_value,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"current_value",value:"Current Value"}),o(g,{id:"current_value",modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=r=>b.value=r),type:"text",inputmode:"decimal",class:"mt-1 block w-full",onBlur:L},null,8,["modelValue"]),o(i,{message:a(l).errors.current_value,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"unit",value:"Unit"}),o(g,{id:"unit",modelValue:a(l).unit,"onUpdate:modelValue":e[6]||(e[6]=r=>a(l).unit=r),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),o(i,{message:a(l).errors.unit,class:"mt-2"},null,8,["message"])])]),t("div",ae,[t("div",null,[o(n,{for:"start_date",value:"Start Date"}),o(g,{id:"start_date",modelValue:a(l).start_date,"onUpdate:modelValue":e[7]||(e[7]=r=>a(l).start_date=r),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),o(i,{message:a(l).errors.start_date,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"target_date",value:"Target Date"}),o(g,{id:"target_date",modelValue:a(l).target_date,"onUpdate:modelValue":e[8]||(e[8]=r=>a(l).target_date=r),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),o(i,{message:a(l).errors.target_date,class:"mt-2"},null,8,["message"])])]),t("div",null,[o(n,{for:"status",value:"Status"}),d(t("select",{id:"status","onUpdate:modelValue":e[9]||(e[9]=r=>a(l).status=r),class:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-indigo-500 focus:ring-indigo-500"},[...e[21]||(e[21]=[t("option",{value:"not_started"},"Not Started",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"paused"},"Paused",-1),t("option",{value:"cancelled"},"Cancelled",-1)])],512),[[M,a(l).status]]),o(i,{message:a(l).errors.status,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{value:"Priority"}),t("div",oe,[t("label",re,[d(t("input",{type:"radio","onUpdate:modelValue":e[10]||(e[10]=r=>a(l).priority=r),value:"low",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[U,a(l).priority]]),e[22]||(e[22]=t("span",{class:"text-gray-700 dark:text-gray-300"},"ðŸ“Œ Low",-1))]),t("label",se,[d(t("input",{type:"radio","onUpdate:modelValue":e[11]||(e[11]=r=>a(l).priority=r),value:"medium",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[U,a(l).priority]]),e[23]||(e[23]=t("span",{class:"text-gray-700 dark:text-gray-300"},"â­ Medium",-1))]),t("label",ie,[d(t("input",{type:"radio","onUpdate:modelValue":e[12]||(e[12]=r=>a(l).priority=r),value:"high",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[U,a(l).priority]]),e[24]||(e[24]=t("span",{class:"text-gray-700 dark:text-gray-300"},"ðŸ”¥ High",-1))])]),o(i,{message:a(l).errors.priority,class:"mt-2"},null,8,["message"])]),t("div",null,[t("label",ne,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=r=>a(l).is_pinned=r),class:"rounded text-indigo-600 focus:ring-indigo-500"},null,512),[[G,a(l).is_pinned]]),e[25]||(e[25]=t("span",{class:"text-gray-700 dark:text-gray-300"},"ðŸ“ Pin this goal",-1))])]),t("div",{class:I(["p-4 rounded-lg",a(l).is_core_goal?"bg-indigo-50 dark:bg-indigo-900/30 border-2 border-indigo-500":"bg-gray-50 dark:bg-gray-700/50"])},[t("label",{class:I(["flex items-start gap-3 cursor-pointer",{"opacity-50":!V.value&&!a(l).is_core_goal}])},[d(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=r=>a(l).is_core_goal=r),disabled:!V.value&&!a(l).is_core_goal,class:"mt-1 rounded text-indigo-600 focus:ring-indigo-500"},null,8,de),[[G,a(l).is_core_goal]]),t("div",null,[e[26]||(e[26]=t("span",{class:"font-semibold text-gray-900 dark:text-white"},"ðŸŽ¯ Core Goal",-1)),e[27]||(e[27]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1",title:"Trá»¥c trung tÃ¢m cá»§a Vision Board"}," Mark this as one of 3 core goals that orbit your Vision Board. ",-1)),V.value?S("",!0):(c(),p("p",ue," âš ï¸ You already have "+h(u.coreGoalsCount+(u.goal.is_core_goal?1:0))+"/3 Core Goals. Uncheck another goal to add a new one. ",1))])],2),o(i,{message:a(l).errors.is_core_goal,class:"mt-2"},null,8,["message"])],2),t("div",ge,[o(a(P),{href:_.route("goals.show",u.goal.id),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},{default:v(()=>[...e[28]||(e[28]=[f(" Cancel ",-1)])]),_:1},8,["href"]),o(J,{disabled:a(l).processing},{default:v(()=>[...e[29]||(e[29]=[f(" Save Changes ",-1)])]),_:1},8,["disabled"])])],32)])])])]),_:1})],64))}};export{be as default};
