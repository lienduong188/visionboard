import{c as o,d as e,n as X,t as n,m as y,p as $,u as c,k as G,e as ee,f as t,C as me,o as _e,a as Te,F as Y,g as Z,r as _,q as $e,h as T,w as z,v as ye,z as te,D as Ue,A as Ce,E as De,x as Se,s as ae,B as K,b as ke,j as le,G as de,T as we,H as Fe,I as Pe,i as Re,J as Ge,l as Me}from"./app-C5dZB1YV.js";import{_ as We}from"./AuthenticatedLayout-DYNFgsn9.js";import{a as ve,f as pe,p as Ve}from"./formatNumber-CZPogZXQ.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as ne,b as ie,a as he}from"./TextInput-BMjgwvjV.js";import{d as be,a as He,_ as Ne}from"./GoalProgressChart-DnqyEtN-.js";import{P as qe}from"./PrimaryButton-r9PhYCUN.js";import"./ApplicationLogo-DbPoxqT5.js";import"./index-DgG1iF4l.js";const Oe={key:2,class:"absolute top-2 right-2 bg-yellow-400 text-yellow-900 rounded-full p-1"},Ke={class:"p-4"},Xe={class:"flex items-center justify-between mb-2"},Ye={class:"text-lg"},Je={class:"font-bold text-lg text-gray-900 dark:text-white mb-2 line-clamp-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"},Qe={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2"},Ze={class:"mb-3"},et={class:"flex justify-between text-sm mb-1"},tt={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},ot={key:1,class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},st={class:"font-semibold text-gray-900 dark:text-white"},rt={class:"flex items-center justify-between pt-3 border-t border-gray-100 dark:border-gray-700"},lt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},at={key:0},nt={key:0,class:"text-red-500 font-medium"},it={key:1,class:"text-yellow-500 font-medium"},dt={key:2,class:"text-orange-500 font-medium"},gt={key:3},ut={key:2,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},ct={class:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400"},vt={__name:"GoalCard",props:{goal:{type:Object,required:!0},showCategory:{type:Boolean,default:!0}},emits:["click"],setup(l,{emit:P}){const p=l,b=P,i=ee(()=>p.goal.progress>=100?"bg-green-500":p.goal.progress>=75?"bg-emerald-500":p.goal.progress>=50?"bg-yellow-500":p.goal.progress>=25?"bg-orange-500":"bg-red-500"),a=ee(()=>{const C={not_started:{text:"Not Started",class:"bg-gray-500"},in_progress:{text:"In Progress",class:"bg-blue-500"},completed:{text:"Completed",class:"bg-green-500"},paused:{text:"Paused",class:"bg-yellow-500"},cancelled:{text:"Cancelled",class:"bg-red-500"}};return C[p.goal.status]||C.not_started}),k=ee(()=>({high:"ðŸ”¥",medium:"â­",low:"ðŸ“Œ"})[p.goal.priority]||""),h=C=>C?new Date(C).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):"",B=ee(()=>{if(!p.goal.target_date)return null;const C=new Date(p.goal.target_date);return Math.ceil((C-new Date)/(1e3*60*60*24))});return(C,L)=>(t(),o("div",{onClick:L[0]||(L[0]=R=>b("click",l.goal)),class:"block group cursor-pointer"},[e("div",{class:"relative overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",style:X({borderTop:`4px solid ${l.goal.category?.color||"#6366F1"}`})},[l.goal.cover_image_url?(t(),o("div",{key:0,class:"h-40 bg-cover bg-center",style:X({backgroundImage:`url(${l.goal.cover_image_url})`})},[...L[1]||(L[1]=[e("div",{class:"h-full w-full bg-gradient-to-t from-black/50 to-transparent"},null,-1)])],4)):(t(),o("div",{key:1,class:"h-32 flex items-center justify-center text-6xl",style:X({backgroundColor:`${l.goal.category?.color}20`})},n(l.goal.category?.icon||"ðŸŽ¯"),5)),l.goal.is_pinned?(t(),o("div",Oe," ðŸ“ ")):y("",!0),e("div",Ke,[e("div",Xe,[l.showCategory&&l.goal.category?(t(),o("span",{key:0,class:"text-xs font-medium px-2 py-1 rounded-full",style:X({backgroundColor:`${l.goal.category.color}20`,color:l.goal.category.color})},n(l.goal.category.icon)+" "+n(l.goal.category.name),5)):y("",!0),e("span",Ye,n(k.value),1)]),e("h3",Je,n(l.goal.title),1),l.goal.description?(t(),o("p",Qe,n(l.goal.description),1)):y("",!0),e("div",Ze,[e("div",et,[L[2]||(L[2]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Progress",-1)),e("span",{class:$(["font-bold",l.goal.progress>=100?"text-green-500":"text-gray-900 dark:text-white"])},n(l.goal.progress)+"% ",3)]),e("div",tt,[e("div",{class:$(["h-full rounded-full transition-all duration-500",i.value]),style:X({width:`${l.goal.progress}%`})},null,6)])]),l.goal.target_value&&l.goal.unit?(t(),o("div",ot,[e("span",st,n(c(ve)(l.goal.current_value)),1),L[3]||(L[3]=G(" / ",-1)),e("span",null,n(c(ve)(l.goal.target_value))+" "+n(l.goal.unit),1)])):y("",!0),e("div",rt,[e("span",{class:$(["text-xs font-medium px-2 py-1 rounded-full text-white",a.value.class])},n(a.value.text),3),l.goal.target_date?(t(),o("div",lt,[B.value!==null?(t(),o("span",at,[B.value<0?(t(),o("span",nt,n(Math.abs(B.value))+" days overdue ",1)):B.value===0?(t(),o("span",it," Due today! ")):B.value<=7?(t(),o("span",dt,n(B.value)+" days left ",1)):(t(),o("span",gt,n(h(l.goal.target_date)),1))])):y("",!0)])):y("",!0)]),l.goal.milestones?.length?(t(),o("div",ut,[e("div",ct,[L[4]||(L[4]=e("span",null,"ðŸ“‹",-1)),e("span",null,n(l.goal.milestones.filter(R=>R.is_completed).length)+"/"+n(l.goal.milestones.length)+" milestones ",1)])])):y("",!0)])],4)]))}},xt={class:"absolute inset-0 overflow-hidden floating-container"},yt=["onMousedown","onTouchstart"],pt=["onMouseenter","onMousedown","onTouchstart"],mt={class:"block cursor-pointer"},bt={key:2,class:"absolute top-1.5 left-1.5 text-sm drop-shadow-md"},ft={class:"absolute bottom-0 left-0 right-0 h-1.5 bg-black/30"},je=180,ht={__name:"UnifiedFloating",props:{goals:{type:Array,default:()=>[]},words:{type:Array,default:()=>[]},containerWidth:{type:Number,default:900},containerHeight:{type:Number,default:900},isMobile:{type:Boolean,default:!1}},emits:["goalClick"],setup(l,{emit:P}){const p=l,b=P,i=_([]);let a=null;const k=g=>{const D=Math.sin(g*9301+49297)*233280;return D-Math.floor(D)},h=g=>{const D=[70,100,130,170,220],w=[45,55,65,80,95];return(p.isMobile?w:D)[(g||3)-1]||(p.isMobile?65:130)},B=(g,D,w)=>{const A=g/2+30,N=p.containerWidth/2,x=p.containerHeight/2,s=Math.ceil(Math.sqrt(w)),v=Math.ceil(w/s),F=D%s,q=Math.floor(D/s),f=(p.containerWidth-A*2)/s,S=(p.containerHeight-A*2)/v;let se=A+F*f+k(D*7+1)*f,ge=A+q*S+k(D*7+3)*S;const ce=se-N,xe=ge-x;if(Math.sqrt(ce*ce+xe*xe)<je+g){const fe=Math.atan2(xe,ce),ue=je+g+50;se=N+Math.cos(fe)*ue,ge=x+Math.sin(fe)*ue}return se=Math.max(A,Math.min(p.containerWidth-A,se)),ge=Math.max(A,Math.min(p.containerHeight-A,ge)),{x:se,y:ge}},C=()=>{const g=[],D=p.goals.length+p.words.length;p.goals.forEach((w,A)=>{const N=h(w.orbit_scale),x=B(N,A,D);g.push({...w,type:"goal",objectId:`goal-${w.id}`,x:x.x,y:x.y,vx:(k(A*13+5)-.5)*.8,vy:(k(A*13+7)-.5)*.8,size:N})}),p.words.forEach((w,A)=>{const N=B(60,p.goals.length+A,D);g.push({...w,type:"word",objectId:`word-${w.id}`,x:N.x,y:N.y,vx:(k((p.goals.length+A)*13+5)-.5)*1,vy:(k((p.goals.length+A)*13+7)-.5)*1,size:60})}),i.value=g},L=(g,D,w)=>{const A=p.containerWidth/2,N=p.containerHeight/2,x=je+w/2,s=g-A,v=D-N;return Math.sqrt(s*s+v*v)<x},R=()=>{i.value=i.value.map(w=>{if(w.objectId===M.value)return w;let{x:A,y:N,vx:x,vy:s,size:v}=w;const F=v/2+40;if(A+=x,N+=s,A<F&&(A=F,x=Math.abs(x)*.9),A>p.containerWidth-F&&(A=p.containerWidth-F,x=-Math.abs(x)*.9),N<F&&(N=F,s=Math.abs(s)*.9),N>p.containerHeight-F&&(N=p.containerHeight-F,s=-Math.abs(s)*.9),L(A,N,v)){const f=p.containerWidth/2,S=p.containerHeight/2,se=A-f,ge=N-S,ce=Math.sqrt(se*se+ge*ge);ce>0&&(x+=se/ce*.4,s+=ge/ce*.4)}const q=Math.sqrt(x*x+s*s);return q>1.5&&(x=x/q*1.5,s=s/q*1.5),q<.1&&q>0&&(x=x/q*.1,s=s/q*.1),x+=(Math.random()-.5)*.03,s+=(Math.random()-.5)*.03,{...w,x:A,y:N,vx:x,vy:s}}),a=requestAnimationFrame(R)};me([()=>p.goals,()=>p.words],()=>{C()},{deep:!0}),_e(()=>{C(),a=requestAnimationFrame(R)}),Te(()=>{a&&cancelAnimationFrame(a)});const U=_(null),M=_(null),E=_({x:0,y:0}),H=_({x:0,y:0}),O=_({vx:0,vy:0}),J=_(!1),Q=(g,D)=>{D.preventDefault(),M.value=g;const w=i.value.find(s=>s.objectId===g);if(!w)return;const A=D.touches?D.touches[0].clientX:D.clientX,N=D.touches?D.touches[0].clientY:D.clientY,x=D.currentTarget.parentElement.getBoundingClientRect();E.value={x:A-x.left-w.x,y:N-x.top-w.y},H.value={x:A,y:N},O.value={vx:0,vy:0},J.value=!1,document.addEventListener("mousemove",oe),document.addEventListener("mouseup",I),document.addEventListener("touchmove",oe,{passive:!1}),document.addEventListener("touchend",I)},oe=g=>{if(!M.value)return;g.preventDefault();const D=g.touches?g.touches[0].clientX:g.clientX,w=g.touches?g.touches[0].clientY:g.clientY,A=D-H.value.x,N=w-H.value.y;(Math.abs(A)>5||Math.abs(N)>5)&&(J.value=!0),O.value={vx:A*.3,vy:N*.3},H.value={x:D,y:w},i.value=i.value.map(x=>{if(x.objectId!==M.value)return x;const s=document.querySelector(".floating-container");if(!s)return x;const v=s.getBoundingClientRect();let F=D-v.left-E.value.x,q=w-v.top-E.value.y;const f=x.size/2+20;return F=Math.max(f,Math.min(p.containerWidth-f,F)),q=Math.max(f,Math.min(p.containerHeight-f,q)),{...x,x:F,y:q,vx:0,vy:0}})},I=()=>{if(!M.value)return;const g=M.value;if(i.value=i.value.map(D=>D.objectId!==g?D:{...D,vx:Math.max(-2,Math.min(2,O.value.vx)),vy:Math.max(-2,Math.min(2,O.value.vy))}),M.value=null,document.removeEventListener("mousemove",oe),document.removeEventListener("mouseup",I),document.removeEventListener("touchmove",oe),document.removeEventListener("touchend",I),!J.value){const D=i.value.find(w=>w.objectId===g);D&&D.type==="goal"&&b("goalClick",D)}J.value=!1},u=g=>g>=100?"bg-green-500":g>=75?"bg-emerald-500":g>=50?"bg-yellow-500":g>=25?"bg-orange-500":"bg-red-500",r=ee(()=>i.value.filter(g=>g.type==="goal")),d=ee(()=>i.value.filter(g=>g.type==="word"));return(g,D)=>(t(),o("div",xt,[(t(!0),o(Y,null,Z(d.value,w=>(t(),o("div",{key:w.objectId,class:$(["absolute floating-word cursor-grab select-none",{"cursor-grabbing":M.value===w.objectId}]),style:X({left:w.x+"px",top:w.y+"px",transform:"translate(-50%, -50%)",zIndex:M.value===w.objectId?100:15}),onMousedown:A=>Q(w.objectId,A),onTouchstart:A=>Q(w.objectId,A)},[e("span",{class:$(["px-3 py-1.5 rounded-full font-bold text-sm whitespace-nowrap shadow-lg transition-transform",{"scale-110 shadow-xl":M.value===w.objectId}]),style:X({backgroundColor:w.color+"25",color:w.color,border:`2px solid ${w.color}`})},n(w.word),7)],46,yt))),128)),(t(!0),o(Y,null,Z(r.value,w=>(t(),o("div",{key:w.objectId,class:$(["absolute floating-goal cursor-grab select-none",{"cursor-grabbing":M.value===w.objectId}]),style:X({left:w.x+"px",top:w.y+"px",transform:"translate(-50%, -50%)",width:w.size+"px",zIndex:M.value===w.objectId?100:U.value===w.id?50:10}),onMouseenter:A=>U.value=w.id,onMouseleave:D[0]||(D[0]=A=>U.value=null),onMousedown:A=>Q(w.objectId,A),onTouchstart:A=>Q(w.objectId,A)},[e("div",mt,[e("div",{class:$(["relative overflow-hidden rounded-xl shadow-lg transition-all duration-300",{"shadow-2xl scale-110":U.value===w.id}]),style:X({height:w.size+"px"})},[w.cover_image_url?(t(),o("div",{key:0,class:"w-full h-full bg-cover bg-center",style:X({backgroundImage:`url(${w.cover_image_url})`})},[...D[1]||(D[1]=[e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"},null,-1)])],4)):(t(),o("div",{key:1,class:"w-full h-full flex items-center justify-center",style:X({backgroundColor:`${w.category?.color}30`})},[e("span",{style:X({fontSize:`${w.size*.45}px`})},n(w.category?.icon||"ðŸŽ¯"),5)],4)),e("div",{class:$(["absolute top-1.5 right-1.5 px-2 py-0.5 rounded-full text-white text-xs font-bold shadow-md",u(w.progress)])},n(w.progress)+"% ",3),w.is_pinned?(t(),o("div",bt," ðŸ“ ")):y("",!0),e("div",ft,[e("div",{class:$(["h-full transition-all duration-500",u(w.progress)]),style:X({width:`${w.progress}%`})},null,6)]),e("div",{class:"absolute inset-0 rounded-xl pointer-events-none",style:X({border:`3px solid ${w.category?.color||"#6366F1"}`})},null,4)],6)])],46,pt))),128))]))}},kt=Ae(ht,[["__scopeId","data-v-592a1d08"]]),wt={class:"p-6"},_t=["value"],$t={class:"mt-1"},Ct={key:0,class:"mt-3 relative"},Mt=["src"],Dt={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},St={class:"grid grid-cols-2 gap-4"},Vt={class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},Tt={class:"mt-3 space-y-3"},Bt={class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},Lt={class:"mt-3 space-y-2"},jt=["onClick"],Ft={key:0,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},At={key:0,class:"flex-1 flex items-center gap-2"},zt=["onKeyup"],Et=["onClick"],Ht=["onDblclick"],It=["onClick"],Ut={class:"flex items-center gap-2 pt-2"},Pt=["disabled"],Rt={class:"mt-2 flex gap-4"},Gt={class:"flex items-center gap-2 cursor-pointer"},Wt={class:"flex items-center gap-2 cursor-pointer"},Nt={class:"flex items-center gap-2 cursor-pointer"},qt={class:"flex items-center gap-2 cursor-pointer"},Ot=["disabled"],Kt={key:0,class:"text-sm text-amber-600 dark:text-amber-400 mt-1"},Xt={__name:"InfoTab",props:{goal:Object,categories:Array,coreGoalsCount:Number},emits:["saved","deleted"],setup(l,{expose:P,emit:p}){const b=l,i=p,a=$e({category_id:"",title:"",description:"",slogan:"",cover_image:null,remove_cover_image:!1,target_value:"",start_value:"",unit:"",start_date:"2026-01-01",target_date:"2026-12-31",priority:"medium",status:"not_started",is_pinned:!1,is_core_goal:!1,progress_mode:"value"}),k=()=>{b.goal&&(a.category_id=b.goal.category_id,a.title=b.goal.title,a.description=b.goal.description||"",a.slogan=b.goal.slogan||"",a.cover_image=null,a.remove_cover_image=!1,a.target_value=b.goal.target_value||"",a.start_value=b.goal.start_value||"",a.unit=b.goal.unit||"",a.start_date=I(b.goal.start_date)||"2026-01-01",a.target_date=I(b.goal.target_date)||"2026-12-31",a.priority=b.goal.priority,a.status=b.goal.status,a.is_pinned=!!b.goal.is_pinned,a.is_core_goal=!!b.goal.is_core_goal,a.progress_mode=b.goal.progress_mode||"value",B.value=b.goal.cover_image_url,C.value=null,O.value=pe(b.goal.start_value),J.value=pe(b.goal.target_value))};me(()=>b.goal?.id,k),_e(k);const h=ee(()=>b.goal&&b.goal.is_core_goal||b.coreGoalsCount<3),B=_(null),C=_(null),L=_(null),R=_(!1),U=_(!1),M=_(""),E=_(null),H=_(""),O=_(""),J=_(""),Q=()=>{a.start_value=Ve(O.value),O.value=pe(a.start_value)},oe=()=>{a.target_value=Ve(J.value),J.value=pe(a.target_value)},I=q=>{if(!q)return"";const f=String(q);return f.includes("T")?f.split("T")[0]:f.includes(" ")?f.split(" ")[0]:f},u=q=>{const f=q.target.files[0];f&&(a.cover_image=f,a.remove_cover_image=!1,C.value=URL.createObjectURL(f))},r=()=>{a.cover_image=null,a.remove_cover_image=!0,C.value=null,B.value=null,L.value&&(L.value.value="")},d=()=>{!b.goal||U.value||(U.value=!0,K.post(route("goals.update",b.goal.id),{_method:"put",...a.data()},{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{U.value=!1,i("saved")},onError:q=>{U.value=!1,a.errors=q},onFinish:()=>{U.value=!1}}))},g=()=>{R.value=!0},D=()=>{!b.goal||U.value||(U.value=!0,K.delete(route("goals.destroy",b.goal.id),{preserveScroll:!0,onSuccess:()=>{U.value=!1,i("deleted")},onFinish:()=>{U.value=!1}}))},w=()=>{R.value=!1},A=()=>{!M.value.trim()||!b.goal||K.post(route("checklists.store",b.goal.id),{title:M.value.trim()},{preserveScroll:!0,onSuccess:()=>{M.value=""}})},N=q=>{b.goal&&K.patch(route("checklists.toggle",[b.goal.id,q.id]),{},{preserveScroll:!0})},x=q=>{E.value=q.id,H.value=q.title},s=q=>{!H.value.trim()||!b.goal||K.put(route("checklists.update",[b.goal.id,q.id]),{title:H.value.trim()},{preserveScroll:!0,onSuccess:()=>{E.value=null,H.value=""}})},v=()=>{E.value=null,H.value=""},F=q=>{b.goal&&K.delete(route("checklists.destroy",[b.goal.id,q.id]),{preserveScroll:!0})};return P({submit:d,processing:U,showDeleteConfirm:R,confirmDelete:g,deleteGoal:D,cancelDelete:w}),(q,f)=>(t(),o("div",wt,[e("form",{onSubmit:ae(d,["prevent"]),class:"space-y-5"},[e("div",null,[T(ne,{for:"modal_category_id",value:"Category"}),z(e("select",{id:"modal_category_id","onUpdate:modelValue":f[0]||(f[0]=S=>c(a).category_id=S),class:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-indigo-500 focus:ring-indigo-500",required:""},[(t(!0),o(Y,null,Z(l.categories,S=>(t(),o("option",{key:S.id,value:S.id},n(S.icon)+" "+n(S.name),9,_t))),128))],512),[[ye,c(a).category_id]]),T(ie,{message:c(a).errors.category_id,class:"mt-2"},null,8,["message"])]),e("div",null,[T(ne,{for:"modal_title",value:"Title"}),T(he,{id:"modal_title",modelValue:c(a).title,"onUpdate:modelValue":f[1]||(f[1]=S=>c(a).title=S),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),T(ie,{message:c(a).errors.title,class:"mt-2"},null,8,["message"])]),e("div",null,[T(ne,{for:"modal_description",value:"Description"}),z(e("textarea",{id:"modal_description","onUpdate:modelValue":f[2]||(f[2]=S=>c(a).description=S),rows:"3",class:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Describe using: State + Vision + Action"},null,512),[[te,c(a).description]]),f[19]||(f[19]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400",title:"MÃ´ táº£ theo cÃ´ng thá»©c: Tráº¡ng thÃ¡i + HÃ¬nh áº£nh + HÃ nh Ä‘á»™ng"},[G(" Tip: Use "),e("strong",null,"State + Vision + Action"),G(" formula ")],-1)),T(ie,{message:c(a).errors.description,class:"mt-2"},null,8,["message"])]),e("div",null,[T(ne,{for:"modal_slogan",value:"Slogan"}),T(he,{id:"modal_slogan",modelValue:c(a).slogan,"onUpdate:modelValue":f[3]||(f[3]=S=>c(a).slogan=S),type:"text",class:"mt-1 block w-full",placeholder:"e.g., Run to live, live to run!"},null,8,["modelValue"]),T(ie,{message:c(a).errors.slogan,class:"mt-2"},null,8,["message"])]),e("div",null,[T(ne,{for:"modal_cover_image",value:"Cover Image"}),e("div",$t,[e("input",{ref_key:"fileInput",ref:L,id:"modal_cover_image",type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif,image/webp",onChange:u,class:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900 dark:file:text-indigo-300 dark:hover:file:bg-indigo-800"},null,544)]),T(ie,{message:c(a).errors.cover_image,class:"mt-2"},null,8,["message"]),C.value||B.value?(t(),o("div",Ct,[e("img",{src:C.value||B.value,alt:"Cover",class:"h-32 w-full object-cover rounded-lg"},null,8,Mt),e("button",{type:"button",onClick:r,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[...f[20]||(f[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])):y("",!0)]),e("div",Dt,[e("div",null,[T(ne,{for:"modal_start_value",value:"Start Value"}),T(he,{id:"modal_start_value",modelValue:O.value,"onUpdate:modelValue":f[4]||(f[4]=S=>O.value=S),type:"text",inputmode:"decimal",class:"mt-1 block w-full",placeholder:"VD: 27",onBlur:Q},null,8,["modelValue"]),T(ie,{message:c(a).errors.start_value,class:"mt-2"},null,8,["message"])]),e("div",null,[T(ne,{for:"modal_target_value",value:"Target Value"}),T(he,{id:"modal_target_value",modelValue:J.value,"onUpdate:modelValue":f[5]||(f[5]=S=>J.value=S),type:"text",inputmode:"decimal",class:"mt-1 block w-full",placeholder:"VD: 20",onBlur:oe},null,8,["modelValue"]),T(ie,{message:c(a).errors.target_value,class:"mt-2"},null,8,["message"])]),e("div",null,[T(ne,{for:"modal_unit",value:"Unit"}),T(he,{id:"modal_unit",modelValue:c(a).unit,"onUpdate:modelValue":f[6]||(f[6]=S=>c(a).unit=S),type:"text",class:"mt-1 block w-full",placeholder:"VD: %"},null,8,["modelValue"]),T(ie,{message:c(a).errors.unit,class:"mt-2"},null,8,["message"])])]),f[33]||(f[33]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},[e("strong",null,"Decrease goal"),G(": Start > Target (e.g., body fat 27% â†’ 20%). "),e("strong",null,"Increase goal"),G(": Start < Target or leave Start empty. ")],-1)),e("div",St,[e("div",null,[T(ne,{for:"modal_start_date",value:"Start Date"}),T(he,{id:"modal_start_date",modelValue:c(a).start_date,"onUpdate:modelValue":f[7]||(f[7]=S=>c(a).start_date=S),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),T(ie,{message:c(a).errors.start_date,class:"mt-2"},null,8,["message"])]),e("div",null,[T(ne,{for:"modal_target_date",value:"Target Date"}),T(he,{id:"modal_target_date",modelValue:c(a).target_date,"onUpdate:modelValue":f[8]||(f[8]=S=>c(a).target_date=S),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),T(ie,{message:c(a).errors.target_date,class:"mt-2"},null,8,["message"])])]),e("div",null,[T(ne,{for:"modal_status",value:"Status"}),z(e("select",{id:"modal_status","onUpdate:modelValue":f[9]||(f[9]=S=>c(a).status=S),class:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-indigo-500 focus:ring-indigo-500"},[...f[21]||(f[21]=[Ue('<option value="not_started">Not Started</option><option value="in_progress">In Progress</option><option value="completed">Completed</option><option value="paused">Paused</option><option value="cancelled">Cancelled</option>',5)])],512),[[ye,c(a).status]]),T(ie,{message:c(a).errors.status,class:"mt-2"},null,8,["message"])]),e("div",Vt,[T(ne,{value:"Progress Mode"}),e("div",Tt,[e("label",{class:$(["flex items-start gap-3 cursor-pointer p-3 rounded-lg transition-colors",c(a).progress_mode==="value"?"bg-blue-100 dark:bg-blue-800/50":"hover:bg-blue-100/50 dark:hover:bg-blue-800/20"])},[z(e("input",{type:"radio","onUpdate:modelValue":f[10]||(f[10]=S=>c(a).progress_mode=S),value:"value",class:"mt-1 text-blue-600 focus:ring-blue-500"},null,512),[[Ce,c(a).progress_mode]]),f[22]||(f[22]=e("div",null,[e("span",{class:"font-semibold text-gray-900 dark:text-white"},"By Value"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1",title:"Theo giÃ¡ trá»‹ - thÃ­ch há»£p cho má»¥c tiÃªu Ä‘o lÆ°á»ng Ä‘Æ°á»£c"}," Progress = Current Value / Target Value. Best for measurable goals (km, kg, %). ")],-1))],2),e("label",{class:$(["flex items-start gap-3 cursor-pointer p-3 rounded-lg transition-colors",c(a).progress_mode==="milestone"?"bg-blue-100 dark:bg-blue-800/50":"hover:bg-blue-100/50 dark:hover:bg-blue-800/20"])},[z(e("input",{type:"radio","onUpdate:modelValue":f[11]||(f[11]=S=>c(a).progress_mode=S),value:"milestone",class:"mt-1 text-blue-600 focus:ring-blue-500"},null,512),[[Ce,c(a).progress_mode]]),f[23]||(f[23]=e("div",null,[e("span",{class:"font-semibold text-gray-900 dark:text-white"},"By Milestones"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1",title:"Theo milestones - thÃ­ch há»£p cho má»¥c tiÃªu cÃ³ nhiá»u bÆ°á»›c"}," Progress = Completed Milestones / Total Milestones. Best for multi-step goals. ")],-1))],2)]),T(ie,{message:c(a).errors.progress_mode,class:"mt-2"},null,8,["message"])]),e("div",Bt,[T(ne,{value:"Checklist"}),e("div",Lt,[(t(!0),o(Y,null,Z(l.goal.checklists,S=>(t(),o("div",{key:S.id,class:"flex items-center gap-2 group"},[e("button",{type:"button",onClick:se=>N(S),class:$(["w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 transition-colors",S.is_completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-500 hover:border-green-400"])},[S.is_completed?(t(),o("svg",Ft,[...f[24]||(f[24]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):y("",!0)],10,jt),E.value===S.id?(t(),o("div",At,[z(e("input",{"onUpdate:modelValue":f[12]||(f[12]=se=>H.value=se),type:"text",class:"flex-1 text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-600 dark:text-white rounded focus:ring-indigo-500 focus:border-indigo-500 py-1",onKeyup:[De(se=>s(S),["enter"]),De(v,["escape"])]},null,40,zt),[[te,H.value]]),e("button",{type:"button",onClick:se=>s(S),class:"text-green-500 hover:text-green-600 text-sm"},"OK",8,Et),e("button",{type:"button",onClick:v,class:"text-gray-400 hover:text-gray-600 text-sm"},"X")])):(t(),o("span",{key:1,onDblclick:se=>x(S),class:$(["flex-1 text-sm cursor-pointer",S.is_completed?"line-through text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"])},n(S.title),43,Ht)),E.value!==S.id?(t(),o("button",{key:2,type:"button",onClick:se=>F(S),class:"text-red-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity text-xs"}," X ",8,It)):y("",!0)]))),128)),e("div",Ut,[f[25]||(f[25]=e("div",{class:"w-5 h-5 flex-shrink-0"},null,-1)),z(e("input",{"onUpdate:modelValue":f[13]||(f[13]=S=>M.value=S),type:"text",placeholder:"Add checklist item...",class:"flex-1 text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-600 dark:text-white rounded focus:ring-indigo-500 focus:border-indigo-500 py-1.5",onKeyup:De(A,["enter"])},null,544),[[te,M.value]]),e("button",{type:"button",onClick:A,disabled:!M.value.trim(),class:"text-indigo-500 hover:text-indigo-600 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"}," + Add ",8,Pt)])]),f[26]||(f[26]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," Double-click to edit. Checklist doesn't affect goal progress. ",-1))]),e("div",null,[T(ne,{value:"Priority"}),e("div",Rt,[e("label",Gt,[z(e("input",{type:"radio","onUpdate:modelValue":f[14]||(f[14]=S=>c(a).priority=S),value:"low",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[Ce,c(a).priority]]),f[27]||(f[27]=e("span",{class:"text-gray-700 dark:text-gray-300"},"Low",-1))]),e("label",Wt,[z(e("input",{type:"radio","onUpdate:modelValue":f[15]||(f[15]=S=>c(a).priority=S),value:"medium",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[Ce,c(a).priority]]),f[28]||(f[28]=e("span",{class:"text-gray-700 dark:text-gray-300"},"Medium",-1))]),e("label",Nt,[z(e("input",{type:"radio","onUpdate:modelValue":f[16]||(f[16]=S=>c(a).priority=S),value:"high",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[Ce,c(a).priority]]),f[29]||(f[29]=e("span",{class:"text-gray-700 dark:text-gray-300"},"High",-1))])]),T(ie,{message:c(a).errors.priority,class:"mt-2"},null,8,["message"])]),e("div",null,[e("label",qt,[z(e("input",{type:"checkbox","onUpdate:modelValue":f[17]||(f[17]=S=>c(a).is_pinned=S),class:"rounded text-indigo-600 focus:ring-indigo-500"},null,512),[[Se,c(a).is_pinned]]),f[30]||(f[30]=e("span",{class:"text-gray-700 dark:text-gray-300"},"Pin this goal",-1))])]),e("div",{class:$(["p-4 rounded-lg",c(a).is_core_goal?"bg-indigo-50 dark:bg-indigo-900/30 border-2 border-indigo-500":"bg-gray-50 dark:bg-gray-700/50"])},[e("label",{class:$(["flex items-start gap-3 cursor-pointer",{"opacity-50":!h.value&&!c(a).is_core_goal}])},[z(e("input",{type:"checkbox","onUpdate:modelValue":f[18]||(f[18]=S=>c(a).is_core_goal=S),disabled:!h.value&&!c(a).is_core_goal,class:"mt-1 rounded text-indigo-600 focus:ring-indigo-500"},null,8,Ot),[[Se,c(a).is_core_goal]]),e("div",null,[f[31]||(f[31]=e("span",{class:"font-semibold text-gray-900 dark:text-white"},"Core Goal",-1)),f[32]||(f[32]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1",title:"Trá»¥c trung tÃ¢m cá»§a Vision Board"}," Mark this as one of 3 core goals that orbit your Vision Board. ",-1)),h.value?y("",!0):(t(),o("p",Kt," You already have 3/3 Core Goals. Uncheck another goal to add a new one. "))])],2),T(ie,{message:c(a).errors.is_core_goal,class:"mt-2"},null,8,["message"])],2)],32)]))}},Yt={class:"p-6"},Jt={class:"flex items-center justify-between mb-4"},Qt={class:"text-lg font-semibold text-gray-900 dark:text-white"},Zt={key:0,class:"text-gray-500 dark:text-gray-400 font-normal"},eo={class:"flex items-start gap-3 p-3"},to=["onClick"],oo={class:"flex-1 min-w-0"},so=["onClick"],ro={key:0,class:"text-xs text-amber-600 dark:text-amber-400"},lo={key:1,class:"text-xs text-gray-400"},ao={class:"mt-2 pl-6 space-y-1"},no={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},io={key:1,class:"text-sm text-indigo-600 dark:text-indigo-400"},go=["innerHTML"],uo={key:2,class:"text-sm text-gray-500 dark:text-gray-400"},co=["src"],vo={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},xo=["onClick","title"],yo=["onClick"],po=["onClick"],mo={class:"border-t border-gray-200 dark:border-gray-700 ml-9 mr-3 mb-2"},bo={class:"flex items-center justify-between py-2"},fo=["onClick"],ho=["onClick"],ko={key:0,class:"flex items-center gap-2 pb-2"},wo=["onUpdate:modelValue","onKeyup"],_o=["onClick"],$o={key:1,class:"space-y-1 pb-2"},Co=["onClick"],Mo={key:0,class:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20"},Do=["onClick"],So={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Vo={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg mx-4 max-h-[80vh] overflow-y-auto"},To={class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},Bo={class:"mb-4"},Lo={class:"mb-4"},jo={class:"mb-4"},Fo={class:"grid grid-cols-2 gap-4 mb-4"},Ao={class:"mb-4"},zo={key:0,class:"mt-2 relative inline-block"},Eo=["src"],Ho={class:"flex items-start gap-3 cursor-pointer"},Io={class:"flex justify-end gap-3"},Uo=["disabled"],Po={__name:"MilestonesTab",props:{goal:Object},setup(l){const P=l;be.setOptions({breaks:!0,gfm:!0});const p=x=>x?be.parse(x):"",b=_([...P.goal?.milestones||[]]);me(()=>P.goal?.milestones,x=>{b.value=[...x||[]]},{deep:!0});const i=()=>{const x=b.value.map(s=>s.id);K.post(route("milestones.reorder",P.goal.id),{order:x},{preserveScroll:!0})},a=_(!1),k=_(null),h=$e({title:"",description:"",memo:"",target_value:"",due_date:"",is_soft:!1,image:null,remove_image:!1}),B=_(null),C=_(null),L=_(""),R=()=>{h.target_value=Ve(L.value),L.value=pe(h.target_value)},U=_({}),M=_({}),E=x=>{U.value[x]=!U.value[x]},H=()=>{k.value=null,h.reset(),B.value=null,L.value="",a.value=!0},O=x=>{k.value=x,h.title=x.title,h.description=x.description||"",h.memo=x.memo||"",h.target_value=x.target_value||"",L.value=pe(x.target_value),h.due_date=x.due_date?x.due_date.substring(0,10):"",h.is_soft=x.is_soft||!1,h.image=null,h.remove_image=!1,B.value=x.image_url||null,a.value=!0},J=x=>{const s=x.target.files[0];s&&(h.image=s,h.remove_image=!1,B.value=URL.createObjectURL(s))},Q=()=>{h.image=null,h.remove_image=!0,B.value=null,C.value&&(C.value.value="")},oe=()=>{k.value?K.post(route("milestones.update",[P.goal.id,k.value.id]),{_method:"put",...h.data()},{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{a.value=!1,h.reset(),B.value=null}}):h.post(route("milestones.store",P.goal.id),{onSuccess:()=>{a.value=!1,h.reset(),B.value=null}})},I=x=>{K.patch(route("milestones.toggle",[P.goal.id,x.id]),{},{preserveScroll:!0})},u=x=>{K.patch(route("milestones.toggle-soft",[P.goal.id,x.id]),{},{preserveScroll:!0})},r=x=>{confirm("Delete this milestone?")&&K.delete(route("milestones.destroy",[P.goal.id,x.id]),{preserveScroll:!0})},d=_({}),g=_({}),D=x=>{const s=d.value[x.id];s?.trim()&&K.post(route("milestone-todos.store",[P.goal.id,x.id]),{title:s.trim()},{preserveScroll:!0,onSuccess:()=>{d.value[x.id]="",g.value[x.id]=!1}})},w=(x,s)=>{K.patch(route("milestone-todos.toggle",[P.goal.id,x.id,s.id]),{},{preserveScroll:!0})},A=(x,s)=>{K.delete(route("milestone-todos.destroy",[P.goal.id,x.id,s.id]),{preserveScroll:!0})},N=x=>x?new Date(x).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"";return(x,s)=>(t(),o("div",Yt,[e("div",Jt,[e("h3",Qt,[s[9]||(s[9]=G(" Milestones ",-1)),l.goal.milestones?.length?(t(),o("span",Zt," ("+n(l.goal.milestones.filter(v=>v.is_completed).length)+"/"+n(l.goal.milestones.length)+") ",1)):y("",!0),s[10]||(s[10]=e("span",{class:"text-sm font-normal text-gray-400 dark:text-gray-500 ml-2"},"(drag to reorder)",-1))]),e("button",{onClick:H,class:"px-3 py-1.5 bg-indigo-500 text-white text-sm rounded-lg hover:bg-indigo-600 transition-colors flex items-center gap-1"},[...s[11]||(s[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),G(" Add ",-1)])])]),b.value.length?(t(),ke(c(He),{key:0,modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=v=>b.value=v),"item-key":"id",class:"space-y-3",handle:".drag-handle",onEnd:i},{item:le(({element:v})=>[e("div",{class:$(["rounded-lg group overflow-hidden",v.is_soft?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":v.is_completed?"bg-green-50 dark:bg-green-900/20":"bg-gray-50 dark:bg-gray-700/50"])},[e("div",eo,[s[16]||(s[16]=e("div",{class:"drag-handle cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 flex-shrink-0 mt-1"},[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})])],-1)),e("button",{onClick:F=>I(v),class:$(["w-6 h-6 flex items-center justify-center rounded-full text-sm transition-colors flex-shrink-0 mt-0.5",v.is_completed?"bg-green-500 text-white hover:bg-green-600":v.is_soft?"bg-amber-400 text-white hover:bg-amber-500":"bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-400 hover:bg-indigo-500 hover:text-white"])},n(v.is_completed?"âœ“":v.is_soft?"!":v.sort_order),11,to),e("div",oo,[e("div",{class:"flex items-center gap-2 cursor-pointer select-none",onClick:F=>E(v.id)},[(t(),o("svg",{class:$(["w-4 h-4 text-gray-400 transition-transform flex-shrink-0",{"rotate-90":U.value[v.id]}]),fill:"currentColor",viewBox:"0 0 20 20"},[...s[12]||(s[12]=[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)])],2)),e("span",{class:$(["font-medium",v.is_completed?"text-green-700 dark:text-green-400 line-through":v.is_soft?"text-amber-700 dark:text-amber-300":"text-gray-900 dark:text-white"])},n(v.title),3),v.is_soft?(t(),o("span",ro," (soft) ")):y("",!0),!U.value[v.id]&&v.image_url?(t(),o("span",lo," img ")):y("",!0)],8,so),z(e("div",ao,[v.description?(t(),o("div",no,n(v.description),1)):y("",!0),v.memo?(t(),o("div",io,[s[13]||(s[13]=e("span",{class:"mr-1"},"Memo:",-1)),e("span",{class:"memo-content prose prose-sm prose-indigo dark:prose-invert max-w-none inline",innerHTML:p(v.memo)},null,8,go)])):y("",!0),v.due_date?(t(),o("div",uo," Due: "+n(N(v.due_date)),1)):y("",!0),v.image_url?(t(),o("img",{key:3,src:v.image_url,alt:"Milestone image",class:"mt-2 rounded-lg max-h-32 object-cover"},null,8,co)):y("",!0)],512),[[de,U.value[v.id]]])]),e("div",vo,[e("button",{onClick:F=>u(v),class:$(["p-1.5 rounded transition-colors",v.is_soft?"text-amber-500 hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/30":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30"]),title:v.is_soft?"Make normal":"Make soft"}," ! ",10,xo),e("button",{onClick:F=>O(v),class:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded transition-colors"},[...s[14]||(s[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)])],8,yo),e("button",{onClick:F=>r(v),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors"},[...s[15]||(s[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,po)])]),z(e("div",mo,[e("div",bo,[e("button",{onClick:F=>M.value[v.id]=!M.value[v.id],class:"text-xs text-gray-500 dark:text-gray-400 hover:text-indigo-500 flex items-center gap-1"},[(t(),o("svg",{class:$(["w-3 h-3 transition-transform",{"rotate-90":M.value[v.id]}]),fill:"currentColor",viewBox:"0 0 20 20"},[...s[17]||(s[17]=[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)])],2)),G(" Todos ("+n(v.todos?.filter(F=>F.is_completed).length||0)+"/"+n(v.todos?.length||0)+") ",1)],8,fo),e("button",{onClick:F=>g.value[v.id]=!g.value[v.id],class:"text-xs text-indigo-500 hover:text-indigo-600"}," + Add ",8,ho)]),g.value[v.id]?(t(),o("div",ko,[z(e("input",{"onUpdate:modelValue":F=>d.value[v.id]=F,type:"text",class:"flex-1 text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded py-1 px-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Todo title...",onKeyup:De(F=>D(v),["enter"])},null,40,wo),[[te,d.value[v.id]]]),e("button",{onClick:F=>D(v),class:"text-xs px-2 py-1 bg-indigo-500 text-white rounded hover:bg-indigo-600"}," Add ",8,_o)])):y("",!0),M.value[v.id]&&v.todos?.length?(t(),o("div",$o,[(t(!0),o(Y,null,Z(v.todos,F=>(t(),o("div",{key:F.id,class:"flex items-center gap-2 text-sm py-1 px-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700/50 group/todo"},[e("button",{onClick:q=>w(v,F),class:$(["w-4 h-4 rounded border flex items-center justify-center transition-colors flex-shrink-0",F.is_completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-500 hover:border-green-400"])},[F.is_completed?(t(),o("svg",Mo,[...s[18]||(s[18]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):y("",!0)],10,Co),e("span",{class:$(["flex-1",F.is_completed?"text-gray-400 line-through":"text-gray-700 dark:text-gray-300"])},n(F.title),3),e("button",{onClick:q=>A(v,F),class:"text-red-400 hover:text-red-600 opacity-0 group-hover/todo:opacity-100 transition-opacity text-xs"}," X ",8,Do)]))),128))])):y("",!0)],512),[[de,U.value[v.id]]])],2)]),_:1},8,["modelValue"])):y("",!0),b.value.length?y("",!0):(t(),o("div",So," No milestones yet. Add your first milestone! ")),a.value?(t(),o("div",{key:2,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",onClick:s[8]||(s[8]=ae(v=>a.value=!1,["self"]))},[e("div",Vo,[e("h3",To,n(k.value?"Edit Milestone":"Add Milestone"),1),e("form",{onSubmit:ae(oe,["prevent"])},[e("div",Bo,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Title * ",-1)),z(e("input",{"onUpdate:modelValue":s[1]||(s[1]=v=>c(h).title=v),type:"text",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Complete first chapter"},null,512),[[te,c(h).title]])]),e("div",Lo,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Description ",-1)),z(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=v=>c(h).description=v),rows:"2",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",placeholder:"Short description..."},null,512),[[te,c(h).description]])]),e("div",jo,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Memo / Notes ",-1)),z(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=v=>c(h).memo=v),rows:"3",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",placeholder:"Detailed notes, ideas..."},null,512),[[te,c(h).memo]])]),e("div",Fo,[e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Target Value ",-1)),z(e("input",{"onUpdate:modelValue":s[4]||(s[4]=v=>L.value=v),type:"text",inputmode:"decimal",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",placeholder:"Optional",onBlur:R},null,544),[[te,L.value]])]),e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Due Date ",-1)),z(e("input",{"onUpdate:modelValue":s[5]||(s[5]=v=>c(h).due_date=v),type:"date",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"},null,512),[[te,c(h).due_date]])])]),e("div",Ao,[s[25]||(s[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Image ",-1)),e("input",{ref_key:"milestoneFileInput",ref:C,type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif,image/webp",onChange:J,class:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900 dark:file:text-indigo-300"},null,544),B.value?(t(),o("div",zo,[e("img",{src:B.value,alt:"Preview",class:"h-24 rounded-lg object-cover"},null,8,Eo),e("button",{type:"button",onClick:Q,class:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-0.5 hover:bg-red-600 transition-colors"},[...s[24]||(s[24]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])):y("",!0)]),e("div",{class:$(["mb-6 p-3 rounded-lg",c(h).is_soft?"bg-amber-50 dark:bg-amber-900/20":"bg-gray-50 dark:bg-gray-700/50"])},[e("label",Ho,[z(e("input",{"onUpdate:modelValue":s[6]||(s[6]=v=>c(h).is_soft=v),type:"checkbox",class:"mt-1 rounded text-amber-500 focus:ring-amber-500"},null,512),[[Se,c(h).is_soft]]),s[26]||(s[26]=e("div",null,[e("span",{class:"font-medium text-gray-900 dark:text-white"},"Soft Milestone"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"}," Won't count toward goal progress. ")],-1))])],2),e("div",Io,[e("button",{type:"button",onClick:s[7]||(s[7]=v=>a.value=!1),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Cancel "),e("button",{type:"submit",disabled:c(h).processing,class:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50"},n(k.value?"Update":"Add"),9,Uo)])],32)])])):y("",!0)]))}},Ro={class:"p-6"},Go={class:"flex items-center justify-between mb-4"},Wo={class:"text-lg font-semibold text-gray-900 dark:text-white"},No={key:0,class:"text-gray-500 dark:text-gray-400 font-normal"},qo={key:0,class:"space-y-3"},Oo=["onClick","title"],Ko={class:"flex-1 min-w-0"},Xo={class:"flex items-center gap-2 flex-wrap"},Yo={class:"text-sm text-gray-600 dark:text-gray-400"},Jo={key:0,class:"text-sm text-gray-500 dark:text-gray-400 truncate mt-1"},Qo={key:1,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},Zo={key:2,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},es={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},ts=["onClick"],os=["onClick"],ss={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},rs={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto"},ls={class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},as={class:"mb-4"},ns={class:"grid grid-cols-3 gap-2"},is={class:"mb-4"},ds={key:0,class:"mb-4"},gs={class:"flex gap-1"},us=["onClick","title"],cs={key:1,class:"mb-4"},vs={class:"flex items-center gap-2"},xs=["value"],ys={key:2,class:"mb-4"},ps={class:"flex gap-2 mb-2"},ms=["disabled"],bs={key:0,class:"flex flex-wrap gap-2"},fs=["onClick"],hs={key:1,class:"text-xs text-gray-400 mt-1"},ks={class:"mb-4"},ws={class:"flex items-center gap-2"},_s={class:"flex-1"},$s={class:"flex-1"},Cs=["min"],Ms={class:"mb-4"},Ds={class:"mb-4"},Ss={key:3,class:"mb-6"},Vs={class:"flex items-center gap-2 cursor-pointer"},Ts={class:"flex justify-end gap-3"},Bs=["disabled"],Ls={__name:"RemindersTab",props:{goal:Object},setup(l){const P=l,p=_(!1),b=_(null),i=$e({type:"progress",frequency:"daily",specific_dates:[],weekly_days:"",monthly_day:1,start_date:"",end_date:"",remind_time:"09:00",message:"",is_active:!0}),a=_(""),k=[{value:1,label:"Mon",fullLabel:"Monday"},{value:2,label:"Tue",fullLabel:"Tuesday"},{value:3,label:"Wed",fullLabel:"Wednesday"},{value:4,label:"Thu",fullLabel:"Thursday"},{value:5,label:"Fri",fullLabel:"Friday"},{value:6,label:"Sat",fullLabel:"Saturday"},{value:7,label:"Sun",fullLabel:"Sunday"}],h=_([1]),B=u=>{const r=h.value.indexOf(u);r>-1?h.value.length>1&&h.value.splice(r,1):h.value.push(u),h.value.sort((d,g)=>d-g),i.weekly_days=h.value.join(",")},C=()=>{a.value&&!i.specific_dates.includes(a.value)&&(i.specific_dates.push(a.value),i.specific_dates.sort(),a.value="")},L=u=>{const r=i.specific_dates.indexOf(u);r>-1&&i.specific_dates.splice(r,1)},R=u=>new Date(u).toLocaleDateString("en-US",{day:"numeric",month:"short"}),U=()=>{b.value=null,i.reset(),i.type="progress",i.frequency="daily",i.remind_time="09:00",i.weekly_days="1",i.monthly_day=1,i.specific_dates=[],i.start_date="",i.end_date="",h.value=[1],a.value="",p.value=!0},M=u=>{b.value=u,i.type=u.type,i.frequency=u.frequency,i.specific_dates=u.specific_dates?u.specific_dates.split(","):[],i.weekly_days=u.weekly_days||"1",i.monthly_day=u.monthly_day||1,i.start_date=u.start_date?u.start_date.slice(0,10):"",i.end_date=u.end_date?u.end_date.slice(0,10):"",i.remind_time=u.remind_time?.slice(0,5)||"09:00",i.message=u.message||"",i.is_active=u.is_active,h.value=u.weekly_days?u.weekly_days.split(",").map(Number):[1],a.value="",p.value=!0},E=()=>{const u={...i.data(),specific_dates:i.specific_dates.length>0?i.specific_dates.join(","):null};b.value?i.transform(()=>u).put(route("reminders.update",[P.goal.id,b.value.id]),{onSuccess:()=>{p.value=!1,i.reset()}}):i.transform(()=>u).post(route("reminders.store",P.goal.id),{onSuccess:()=>{p.value=!1,i.reset()}})},H=u=>{K.patch(route("reminders.toggle",[P.goal.id,u.id]),{},{preserveScroll:!0})},O=u=>{confirm("Delete this reminder?")&&K.delete(route("reminders.destroy",[P.goal.id,u.id]),{preserveScroll:!0})},J={daily:"Daily",weekly:"Weekly",monthly:"Monthly",specific:"Specific dates"},Q={progress:"Progress",deadline:"Deadline",custom:"Custom"},oe=u=>{if(u.frequency==="weekly"&&u.weekly_days){const r={1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"};return`Weekly (${u.weekly_days.split(",").map(g=>r[g]||g).join(", ")})`}if(u.frequency==="monthly"&&u.monthly_day)return`Day ${u.monthly_day} monthly`;if(u.frequency==="specific"&&u.specific_dates){const r=u.specific_dates.split(",");return r.length<=3?r.map(d=>new Date(d).toLocaleDateString("en-US",{day:"numeric",month:"short"})).join(", "):`${r.length} specific dates`}return J[u.frequency]||u.frequency},I=u=>u?new Date(u).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"";return(u,r)=>(t(),o("div",Ro,[e("div",Go,[e("h3",Wo,[r[13]||(r[13]=G(" Reminders ",-1)),l.goal.reminders?.length?(t(),o("span",No," ("+n(l.goal.reminders.filter(d=>d.is_active).length)+" active) ",1)):y("",!0)]),e("button",{onClick:U,class:"px-3 py-1.5 bg-indigo-500 text-white text-sm rounded-lg hover:bg-indigo-600 transition-colors flex items-center gap-1"},[...r[14]||(r[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),G(" Add ",-1)])])]),l.goal.reminders?.length?(t(),o("div",qo,[(t(!0),o(Y,null,Z(l.goal.reminders,d=>(t(),o("div",{key:d.id,class:$(["flex items-center gap-3 p-3 rounded-lg group",d.is_active?"bg-indigo-50 dark:bg-indigo-900/20":"bg-gray-50 dark:bg-gray-700/50 opacity-60"])},[e("button",{onClick:g=>H(d),class:$(["w-8 h-8 flex items-center justify-center rounded-full text-lg transition-colors",d.is_active?"bg-indigo-500 text-white hover:bg-indigo-600":"bg-gray-300 dark:bg-gray-600 text-gray-500 hover:bg-indigo-500 hover:text-white"]),title:d.is_active?"Disable":"Enable"},n(d.is_active?"ON":"OFF"),11,Oo),e("div",Ko,[e("div",Xo,[e("span",{class:$(["px-2 py-0.5 text-xs rounded-full font-medium",{"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":d.type==="progress","bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":d.type==="deadline","bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400":d.type==="custom"}])},n(Q[d.type]),3),e("span",Yo,n(oe(d))+" at "+n(d.remind_time?.slice(0,5)),1)]),d.message?(t(),o("div",Jo,' "'+n(d.message)+'" ',1)):y("",!0),d.start_date||d.end_date?(t(),o("div",Qo," ðŸ“… "+n(d.start_date?I(d.start_date):"Start")+" â†’ "+n(d.end_date?I(d.end_date):"Ongoing"),1)):y("",!0),d.next_send_at?(t(),o("div",Zo," Next: "+n(I(d.next_send_at)),1)):y("",!0)]),e("div",es,[e("button",{onClick:g=>M(d),class:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded transition-colors"},[...r[15]||(r[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)])],8,ts),e("button",{onClick:g=>O(d),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors"},[...r[16]||(r[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,os)])],2))),128))])):(t(),o("div",ss," No reminders yet. Add one to stay on track! ")),p.value?(t(),o("div",{key:2,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",onClick:r[12]||(r[12]=ae(d=>p.value=!1,["self"]))},[e("div",rs,[e("h3",ls,n(b.value?"Edit Reminder":"Add Reminder"),1),e("form",{onSubmit:ae(E,["prevent"])},[e("div",as,[r[20]||(r[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Type * ",-1)),e("div",ns,[e("button",{type:"button",onClick:r[0]||(r[0]=d=>c(i).type="progress"),class:$(["p-3 rounded-lg border-2 text-center transition-all",c(i).type==="progress"?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-600 hover:border-blue-300"])},[...r[17]||(r[17]=[e("div",{class:"text-xl mb-1"},"Progress",-1),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Update progress",-1)])],2),e("button",{type:"button",onClick:r[1]||(r[1]=d=>c(i).type="deadline"),class:$(["p-3 rounded-lg border-2 text-center transition-all",c(i).type==="deadline"?"border-red-500 bg-red-50 dark:bg-red-900/30":"border-gray-200 dark:border-gray-600 hover:border-red-300"])},[...r[18]||(r[18]=[e("div",{class:"text-xl mb-1"},"Deadline",-1),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Due date reminder",-1)])],2),e("button",{type:"button",onClick:r[2]||(r[2]=d=>c(i).type="custom"),class:$(["p-3 rounded-lg border-2 text-center transition-all",c(i).type==="custom"?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[...r[19]||(r[19]=[e("div",{class:"text-xl mb-1"},"Custom",-1),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Custom message",-1)])],2)])]),e("div",is,[r[22]||(r[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Frequency * ",-1)),z(e("select",{"onUpdate:modelValue":r[3]||(r[3]=d=>c(i).frequency=d),class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"},[...r[21]||(r[21]=[e("option",{value:"daily"},"Daily",-1),e("option",{value:"weekly"},"Weekly",-1),e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"specific"},"Specific dates",-1)])],512),[[ye,c(i).frequency]])]),c(i).frequency==="weekly"?(t(),o("div",ds,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Days of week ",-1)),e("div",gs,[(t(),o(Y,null,Z(k,d=>e("button",{key:d.value,type:"button",onClick:g=>B(d.value),class:$(["w-10 h-10 rounded-full text-sm font-medium transition-all",h.value.includes(d.value)?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-indigo-100 dark:hover:bg-indigo-900/30"]),title:d.fullLabel},n(d.label),11,us)),64))])])):y("",!0),c(i).frequency==="monthly"?(t(),o("div",cs,[r[26]||(r[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Day of month ",-1)),e("div",vs,[r[24]||(r[24]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Day",-1)),z(e("select",{"onUpdate:modelValue":r[4]||(r[4]=d=>c(i).monthly_day=d),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"},[(t(),o(Y,null,Z(31,d=>e("option",{key:d,value:d},n(d),9,xs)),64))],512),[[ye,c(i).monthly_day]]),r[25]||(r[25]=e("span",{class:"text-gray-600 dark:text-gray-400"},"of each month",-1))])])):y("",!0),c(i).frequency==="specific"?(t(),o("div",ys,[r[29]||(r[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Select specific dates ",-1)),e("div",ps,[z(e("input",{"onUpdate:modelValue":r[5]||(r[5]=d=>a.value=d),type:"date",class:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 text-sm"},null,512),[[te,a.value]]),e("button",{type:"button",onClick:C,disabled:!a.value,class:"px-3 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...r[27]||(r[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)])],8,ms)]),c(i).specific_dates.length?(t(),o("div",bs,[(t(!0),o(Y,null,Z(c(i).specific_dates,d=>(t(),o("span",{key:d,class:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-sm"},[G(n(R(d))+" ",1),e("button",{type:"button",onClick:g=>L(d),class:"hover:text-red-500 transition-colors"},[...r[28]||(r[28]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,fs)]))),128))])):(t(),o("p",hs," Add at least 1 date "))])):y("",!0),e("div",ks,[r[33]||(r[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[G(" Active Period "),e("span",{class:"text-gray-400 font-normal"},"(optional)")],-1)),e("div",ws,[e("div",_s,[r[30]||(r[30]=e("label",{class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},"From",-1)),z(e("input",{"onUpdate:modelValue":r[6]||(r[6]=d=>c(i).start_date=d),type:"date",class:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 text-sm"},null,512),[[te,c(i).start_date]])]),r[32]||(r[32]=e("span",{class:"text-gray-400 mt-5"},"â†’",-1)),e("div",$s,[r[31]||(r[31]=e("label",{class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},"To",-1)),z(e("input",{"onUpdate:modelValue":r[7]||(r[7]=d=>c(i).end_date=d),type:"date",min:c(i).start_date||void 0,class:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 text-sm"},null,8,Cs),[[te,c(i).end_date]])])]),r[34]||(r[34]=e("p",{class:"text-xs text-gray-400 mt-1"}," Leave empty for ongoing reminders ",-1))]),e("div",Ms,[r[35]||(r[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Time * ",-1)),z(e("input",{"onUpdate:modelValue":r[8]||(r[8]=d=>c(i).remind_time=d),type:"time",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"},null,512),[[te,c(i).remind_time]])]),e("div",Ds,[r[36]||(r[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Custom message ",-1)),z(e("textarea",{"onUpdate:modelValue":r[9]||(r[9]=d=>c(i).message=d),rows:"2",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",placeholder:"Message in reminder email..."},null,512),[[te,c(i).message]])]),b.value?(t(),o("div",Ss,[e("label",Vs,[z(e("input",{"onUpdate:modelValue":r[10]||(r[10]=d=>c(i).is_active=d),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[Se,c(i).is_active]]),r[37]||(r[37]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Active",-1))])])):y("",!0),e("div",Ts,[e("button",{type:"button",onClick:r[11]||(r[11]=d=>p.value=!1),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Cancel "),e("button",{type:"submit",disabled:c(i).processing,class:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50"},n(b.value?"Update":"Add"),9,Bs)])],32)])])):y("",!0)]))}},js={class:"p-6"},Fs={class:"flex items-center justify-between mb-4"},As={class:"text-lg font-semibold text-gray-900 dark:text-white"},zs={key:0,class:"text-gray-500 dark:text-gray-400 font-normal"},Es={class:"flex gap-2"},Hs={key:0,class:"space-y-6"},Is={key:0},Us={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2 flex items-center gap-2"},Ps=["innerHTML"],Rs={class:"space-y-2"},Gs=["href"],Ws={class:"font-medium text-blue-600 dark:text-blue-400 hover:underline truncate"},Ns={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},qs={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Os=["onClick"],Ks=["onClick"],Xs=["onClick"],Ys={key:1},Js={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2 flex items-center gap-2"},Qs=["innerHTML"],Zs={class:"space-y-2"},er=["href"],tr={class:"font-medium text-green-600 dark:text-green-400 hover:underline truncate"},or={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2"},sr={key:0},rr={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},lr=["href"],ar=["onClick"],nr=["onClick"],ir={key:2},dr={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2 flex items-center gap-2"},gr=["innerHTML"],ur={class:"space-y-2"},cr={class:"flex items-start justify-between gap-3"},vr={class:"flex-1 min-w-0"},xr={class:"font-medium text-purple-600 dark:text-purple-400 mb-1"},yr=["innerHTML"],pr=["onClick"],mr={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"},br=["onClick"],fr=["onClick"],hr=["onClick"],kr={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},wr={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-[90vw] max-w-5xl max-h-[90vh] overflow-y-auto"},_r={class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},$r={key:0,class:"mb-4"},Cr={class:"grid grid-cols-3 gap-2"},Mr={class:"mb-4"},Dr={key:1,class:"mb-4"},Sr={key:2,class:"mb-4"},Vr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Tr={class:"relative"},Br=["required"],Lr={key:0,class:"text-green-600 dark:text-green-400"},jr={key:1,class:"text-gray-400"},Fr={key:3,class:"mb-4"},Ar={class:"flex justify-end gap-3"},zr=["disabled"],Er={key:0,class:"fixed inset-0 z-[80] flex items-center justify-center p-4"},Hr={__name:"ReferencesTab",props:{goal:Object},setup(l){be.setOptions({breaks:!0,gfm:!0});const P=x=>x?be.parse(x):"",p=l,b=_(!1),i=_(null),a=_(null),k=$e({type:"link",title:"",content:"",file:null}),h=_(null),B=_(null),C=_(""),L=()=>{const x=B.value;x&&(x.style.height="auto",x.style.height=Math.min(x.scrollHeight,window.innerHeight*.6)+"px")},R=ee(()=>{const x=p.goal?.references||[];return{links:x.filter(s=>s.type==="link"),files:x.filter(s=>s.type==="file"),texts:x.filter(s=>s.type==="text")}}),U=ee(()=>p.goal?.references?.length||0),M=_({title:"",content:"",file:null}),E=ee(()=>k.title!==M.value.title||k.content!==M.value.content||k.file!==null),H=_(!1),O=()=>{if(E.value){H.value=!0;return}b.value=!1},J=()=>{H.value=!1,b.value=!1},Q=()=>{H.value=!1},oe=x=>{x.stopPropagation(),O()},I=(x="link")=>{i.value=null,k.reset(),k.type=x,C.value="",M.value={title:"",content:"",file:null},b.value=!0},u=x=>{i.value=x,k.type=x.type,k.title=x.title,k.content=x.content||"",k.file=null,C.value=x.file_name||"",M.value={title:x.title,content:x.content||"",file:null},b.value=!0,Pe(()=>L())},r=x=>{const s=x.target.files[0];s&&(k.file=s,C.value=s.name,k.title||(k.title=s.name))},d=()=>{i.value?K.post(route("references.update",[p.goal.id,i.value.id]),{_method:"put",title:k.title,content:k.content,file:k.file},{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{b.value=!1,k.reset()}}):K.post(route("references.store",p.goal.id),{type:k.type,title:k.title,content:k.content,file:k.file},{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{b.value=!1,k.reset()}})},g=x=>{confirm("Delete this reference?")&&K.delete(route("references.destroy",[p.goal.id,x.id]),{preserveScroll:!0})},D=async(x,s)=>{try{await navigator.clipboard.writeText(x);const v=s.target.closest("button"),F=v.innerHTML;v.innerHTML='<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>',setTimeout(()=>{v.innerHTML=F},1500)}catch(v){console.error("Failed to copy:",v)}},w=x=>{a.value=a.value===x?null:x},A=x=>{if(!x)return"";const s=["B","KB","MB","GB"];let v=x,F=0;for(;v>=1024&&F<s.length-1;)v/=1024,F++;return`${v.toFixed(1)} ${s[F]}`},N={link:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>',file:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>',text:'<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>'};return(x,s)=>(t(),o("div",js,[e("div",Fs,[e("h3",As,[s[10]||(s[10]=G(" References ",-1)),U.value?(t(),o("span",zs," ("+n(U.value)+") ",1)):y("",!0)]),e("div",Es,[e("button",{onClick:s[0]||(s[0]=v=>I("link")),class:"px-3 py-1.5 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-1",title:"Add link"},[...s[11]||(s[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),G(" Link ",-1)])]),e("button",{onClick:s[1]||(s[1]=v=>I("file")),class:"px-3 py-1.5 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors flex items-center gap-1",title:"Add file"},[...s[12]||(s[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),G(" File ",-1)])]),e("button",{onClick:s[2]||(s[2]=v=>I("text")),class:"px-3 py-1.5 bg-purple-500 text-white text-sm rounded-lg hover:bg-purple-600 transition-colors flex items-center gap-1",title:"Add note"},[...s[13]||(s[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),G(" Note ",-1)])])])]),U.value?(t(),o("div",Hs,[R.value.links.length?(t(),o("div",Is,[e("h4",Us,[e("span",{innerHTML:N.link,class:"text-blue-500"},null,8,Ps),G(" Links ("+n(R.value.links.length)+") ",1)]),e("div",Rs,[(t(!0),o(Y,null,Z(R.value.links,v=>(t(),o("div",{key:v.id,class:"flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg group"},[e("a",{href:v.content,target:"_blank",rel:"noopener noreferrer",class:"flex-1 min-w-0"},[e("div",Ws,n(v.title),1),e("div",Ns,n(v.content),1)],8,Gs),e("div",qs,[e("button",{onClick:F=>D(v.content,F),class:"p-1.5 text-gray-400 hover:text-blue-500 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded transition-colors",title:"Copy link"},[...s[14]||(s[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])],8,Os),e("button",{onClick:F=>u(v),class:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded transition-colors",title:"Edit"},[...s[15]||(s[15]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)])],8,Ks),e("button",{onClick:F=>g(v),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors",title:"Delete"},[...s[16]||(s[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,Xs)])]))),128))])])):y("",!0),R.value.files.length?(t(),o("div",Ys,[e("h4",Js,[e("span",{innerHTML:N.file,class:"text-green-500"},null,8,Qs),G(" Files ("+n(R.value.files.length)+") ",1)]),e("div",Zs,[(t(!0),o(Y,null,Z(R.value.files,v=>(t(),o("div",{key:v.id,class:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg group"},[e("a",{href:v.file_url,target:"_blank",class:"flex-1 min-w-0"},[e("div",tr,n(v.title),1),e("div",or,[e("span",null,n(v.file_name),1),v.file_size?(t(),o("span",sr,n(A(v.file_size)),1)):y("",!0)])],8,er),e("div",rr,[e("a",{href:v.file_url,download:"",class:"p-1.5 text-gray-400 hover:text-green-500 hover:bg-green-100 dark:hover:bg-green-900/30 rounded transition-colors",title:"Download"},[...s[17]||(s[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])],8,lr),e("button",{onClick:F=>u(v),class:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded transition-colors",title:"Edit"},[...s[18]||(s[18]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)])],8,ar),e("button",{onClick:F=>g(v),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors",title:"Delete"},[...s[19]||(s[19]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,nr)])]))),128))])])):y("",!0),R.value.texts.length?(t(),o("div",ir,[e("h4",dr,[e("span",{innerHTML:N.text,class:"text-purple-500"},null,8,gr),G(" Notes ("+n(R.value.texts.length)+") ",1)]),e("div",ur,[(t(!0),o(Y,null,Z(R.value.texts,v=>(t(),o("div",{key:v.id,class:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg group"},[e("div",cr,[e("div",vr,[e("div",xr,n(v.title),1),e("div",{class:$(["text-sm text-gray-600 dark:text-gray-300 prose prose-sm prose-purple dark:prose-invert max-w-none",{"line-clamp-3":a.value!==v.id}]),innerHTML:P(v.content)},null,10,yr),v.content&&v.content.length>150?(t(),o("button",{key:0,onClick:F=>w(v.id),class:"text-xs text-purple-500 hover:text-purple-700 mt-1"},n(a.value===v.id?"Show less":"Show more"),9,pr)):y("",!0)]),e("div",mr,[e("button",{onClick:F=>D(v.content,F),class:"p-1.5 text-gray-400 hover:text-purple-500 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded transition-colors",title:"Copy text"},[...s[20]||(s[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])],8,br),e("button",{onClick:F=>u(v),class:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded transition-colors",title:"Edit"},[...s[21]||(s[21]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)])],8,fr),e("button",{onClick:F=>g(v),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors",title:"Delete"},[...s[22]||(s[22]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,hr)])])]))),128))])])):y("",!0)])):(t(),o("div",kr,[...s[23]||(s[23]=[e("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),G(" No references yet. Add links, files, or notes to keep track of resources! ",-1)])])),(t(),ke(Fe,{to:"body"},[b.value?(t(),o("div",{key:0,class:"fixed inset-0 z-[70] flex items-center justify-center bg-black/50",onClick:ae(oe,["self"])},[e("div",wr,[e("h3",_r,n(i.value?"Edit Reference":"Add Reference"),1),e("form",{onSubmit:ae(d,["prevent"])},[i.value?y("",!0):(t(),o("div",$r,[s[27]||(s[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Type ",-1)),e("div",Cr,[e("button",{type:"button",onClick:s[3]||(s[3]=v=>c(k).type="link"),class:$(["p-3 rounded-lg border-2 text-center transition-all",c(k).type==="link"?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-600 hover:border-blue-300"])},[...s[24]||(s[24]=[e("div",{class:"text-2xl mb-1"},"Link",-1),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"URL",-1)])],2),e("button",{type:"button",onClick:s[4]||(s[4]=v=>c(k).type="file"),class:$(["p-3 rounded-lg border-2 text-center transition-all",c(k).type==="file"?"border-green-500 bg-green-50 dark:bg-green-900/30":"border-gray-200 dark:border-gray-600 hover:border-green-300"])},[...s[25]||(s[25]=[e("div",{class:"text-2xl mb-1"},"File",-1),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Upload",-1)])],2),e("button",{type:"button",onClick:s[5]||(s[5]=v=>c(k).type="text"),class:$(["p-3 rounded-lg border-2 text-center transition-all",c(k).type==="text"?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[...s[26]||(s[26]=[e("div",{class:"text-2xl mb-1"},"Note",-1),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Text",-1)])],2)])])),e("div",Mr,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Title * ",-1)),z(e("input",{"onUpdate:modelValue":s[6]||(s[6]=v=>c(k).title=v),type:"text",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",placeholder:"Reference title..."},null,512),[[te,c(k).title]])]),c(k).type==="link"?(t(),o("div",Dr,[s[29]||(s[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," URL * ",-1)),z(e("input",{"onUpdate:modelValue":s[7]||(s[7]=v=>c(k).content=v),type:"url",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",placeholder:"https://..."},null,512),[[te,c(k).content]])])):y("",!0),c(k).type==="file"?(t(),o("div",Sr,[e("label",Vr," File "+n(i.value?"(leave empty to keep current)":"*"),1),e("div",Tr,[e("input",{ref_key:"fileInput",ref:h,type:"file",onChange:r,class:"hidden",required:!i.value},null,40,Br),e("button",{type:"button",onClick:s[8]||(s[8]=v=>h.value?.click()),class:"w-full px-4 py-3 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-green-500 dark:hover:border-green-500 transition-colors text-left"},[C.value?(t(),o("div",Lr,n(C.value),1)):(t(),o("div",jr," Click to select file (max 10MB) "))])])])):y("",!0),c(k).type==="text"?(t(),o("div",Fr,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Content * ",-1)),z(e("textarea",{ref_key:"textareaRef",ref:B,"onUpdate:modelValue":s[9]||(s[9]=v=>c(k).content=v),rows:"6",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 min-h-[200px] max-h-[60vh] resize-y",placeholder:"Your notes... (supports **bold**, *italic*, - lists)",onInput:L},null,544),[[te,c(k).content]]),s[31]||(s[31]=e("p",{class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},"Supports Markdown formatting",-1))])):y("",!0),e("div",Ar,[e("button",{type:"button",onClick:O,class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Cancel "),e("button",{type:"submit",disabled:c(k).processing,class:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50"},n(i.value?"Update":"Add"),9,zr)])],32)])])):y("",!0),T(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:le(()=>[H.value?(t(),o("div",Er,[e("div",{class:"absolute inset-0 bg-black/30",onClick:Q}),e("div",{class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md w-full"},[e("div",{class:"text-center"},[s[32]||(s[32]=e("div",{class:"text-4xl mb-4"},"âš ï¸",-1)),s[33]||(s[33]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Unsaved Changes ",-1)),s[34]||(s[34]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Are you sure you want to leave? You will lose any unsaved changes. ",-1)),e("div",{class:"flex items-center justify-center gap-3"},[e("button",{onClick:Q,class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Stay "),e("button",{onClick:J,class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"}," Leave ")])])])])):y("",!0)]),_:1})]))]))}},Ir={class:"p-6"},Ur={class:"mb-6"},Pr={class:"flex items-center justify-between mb-4"},Rr={class:"text-lg font-semibold text-gray-900 dark:text-white"},Gr={key:0,class:"text-gray-500 dark:text-gray-400 font-normal"},Wr=["disabled","title"],Nr={class:"flex items-center gap-2"},qr={key:0,class:"space-y-2"},Or={class:"flex-1"},Kr={class:"flex items-center gap-2 flex-wrap"},Xr={class:"font-medium text-gray-900 dark:text-white"},Yr={key:0,class:"text-xs text-green-500"},Jr={key:1,class:"text-xs text-red-500"},Qr={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Zr={class:"flex items-center gap-2"},el={class:"text-sm text-gray-500 dark:text-gray-400"},tl={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},ol=["onClick"],sl=["onClick"],rl={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ll={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md mx-4"},al={class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},nl={class:"mb-4"},il={class:"mb-4"},dl={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},gl={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},ul={class:"mb-6"},cl={class:"flex justify-end gap-3"},vl=["disabled"],xl={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm mx-4"},yl={class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},pl={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},ml={class:"mb-4"},bl={class:"flex justify-end gap-3"},fl=["disabled"],hl={__name:"HistoryTab",props:{goal:Object},setup(l){const P=l,p=_(!1),b=_(null),i=$e({new_value:"",logged_at:"",note:""}),a=_(!1),k=_(!1),h=_(""),B=_(!1),C=()=>{h.value="",k.value=!0},L=()=>{B.value=!0,K.post(route("progress-logs.increment",P.goal.id),{note:h.value||null},{preserveScroll:!0,onSuccess:()=>{k.value=!1,h.value=""},onFinish:()=>{B.value=!1}})},R=_(!1),U=()=>{confirm("Recalculate progress? This will set current value = number of logs.")&&(R.value=!0,K.post(route("progress-logs.recalculate",P.goal.id),{},{preserveScroll:!0,onFinish:()=>{R.value=!1}}))},M=_(""),E=()=>{i.new_value=Ve(M.value),M.value=pe(i.new_value)},H=()=>{b.value=null,i.reset(),i.logged_at=new Date().toISOString().split("T")[0],i.new_value="",M.value="",p.value=!0},O=I=>{b.value=I,i.new_value=I.new_value,M.value=pe(I.new_value),i.logged_at=I.logged_at?.split("T")[0]||I.logged_at?.split(" ")[0]||"",i.note=I.note||"",p.value=!0},J=()=>{b.value?i.put(route("progress-logs.update",[P.goal.id,b.value.id]),{onSuccess:()=>{p.value=!1,i.reset()}}):i.post(route("progress-logs.store",P.goal.id),{onSuccess:()=>{p.value=!1,i.reset()}})},Q=I=>{confirm("Delete this progress log?")&&K.delete(route("progress-logs.destroy",[P.goal.id,I.id]),{preserveScroll:!0})},oe=I=>I?new Date(I).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):"";return(I,u)=>(t(),o("div",Ir,[e("div",Ur,[T(Ne,{goal:l.goal,"progress-logs":l.goal.progress_logs||[]},null,8,["goal","progress-logs"])]),e("div",null,[e("div",Pr,[e("div",null,[e("h3",Rr,[u[9]||(u[9]=G(" Progress History ",-1)),l.goal.progress_logs?.length?(t(),o("span",Gr," ("+n(l.goal.progress_logs.length)+" logs) ",1)):y("",!0)]),l.goal.target_value?(t(),o("button",{key:0,onClick:U,disabled:R.value,class:"text-xs text-orange-500 hover:text-orange-600 hover:underline disabled:opacity-50",title:l.goal.progress_logs?.length?"Äáº·t current value = sá»‘ logs":"Reset current value vá» 0"},n(R.value?"Recalculating...":l.goal.progress_logs?.length?"ðŸ”„ Recalculate (count logs)":"ðŸ”„ Reset to 0"),9,Wr)):y("",!0)]),e("div",Nr,[l.goal.target_value&&l.goal.unit?(t(),o("button",{key:0,onClick:C,class:"px-3 py-1.5 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors flex items-center gap-1 font-medium",title:"Quick add +1"}," +1 "+n(l.goal.unit),1)):y("",!0),e("button",{onClick:H,class:"px-3 py-1.5 bg-indigo-500 text-white text-sm rounded-lg hover:bg-indigo-600 transition-colors flex items-center gap-1"},[...u[10]||(u[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),G(" Add Log ",-1)])])])]),l.goal.progress_logs?.length?(t(),o("div",qr,[(t(!0),o(Y,null,Z(a.value?l.goal.progress_logs:l.goal.progress_logs.slice(0,5),r=>(t(),o("div",{key:r.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg group"},[e("div",Or,[e("div",Kr,[e("span",Xr,n(c(ve)(r.new_value))+" "+n(l.goal.unit),1),u[11]||(u[11]=e("span",{class:"text-gray-500 dark:text-gray-400"},"â†’",-1)),e("span",{class:$(["font-medium",r.new_progress>=r.previous_progress?"text-green-500":"text-red-500"])},n(r.new_progress)+"% ",3),r.new_progress>r.previous_progress?(t(),o("span",Yr," (+"+n(r.new_progress-r.previous_progress)+"%) ",1)):r.new_progress<r.previous_progress?(t(),o("span",Jr," ("+n(r.new_progress-r.previous_progress)+"%) ",1)):y("",!0)]),r.note?(t(),o("div",Qr,n(r.note),1)):y("",!0)]),e("div",Zr,[e("div",el,n(oe(r.logged_at)),1),e("div",tl,[e("button",{onClick:d=>O(r),class:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded transition-colors"},[...u[12]||(u[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)])],8,ol),e("button",{onClick:d=>Q(r),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors"},[...u[13]||(u[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,sl)])])]))),128)),l.goal.progress_logs.length>5?(t(),o("button",{key:0,onClick:u[0]||(u[0]=r=>a.value=!a.value),class:"w-full py-2 text-sm text-indigo-500 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors"},n(a.value?"Show less":`Show all ${l.goal.progress_logs.length} logs`),1)):y("",!0)])):(t(),o("div",rl," No progress logs yet. Add your first log! "))]),p.value?(t(),o("div",{key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",onClick:u[5]||(u[5]=ae(r=>p.value=!1,["self"]))},[e("div",ll,[e("h3",al,n(b.value?"Edit Progress Log":"Add Progress Log"),1),e("form",{onSubmit:ae(J,["prevent"])},[e("div",nl,[u[14]||(u[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Date * ",-1)),z(e("input",{"onUpdate:modelValue":u[1]||(u[1]=r=>c(i).logged_at=r),type:"date",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"},null,512),[[te,c(i).logged_at]]),u[15]||(u[15]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," Can be a past date ",-1))]),e("div",il,[e("label",dl," Value ("+n(l.goal.unit||"unit")+") * ",1),z(e("input",{"onUpdate:modelValue":u[2]||(u[2]=r=>M.value=r),type:"text",inputmode:"decimal",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",onBlur:E},null,544),[[te,M.value]]),e("p",gl," Target: "+n(c(ve)(l.goal.target_value))+" "+n(l.goal.unit),1)]),e("div",ul,[u[16]||(u[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Note ",-1)),z(e("textarea",{"onUpdate:modelValue":u[3]||(u[3]=r=>c(i).note=r),rows:"2",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500",placeholder:"e.g., Ran 5km this morning..."},null,512),[[te,c(i).note]])]),e("div",cl,[e("button",{type:"button",onClick:u[4]||(u[4]=r=>p.value=!1),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Cancel "),e("button",{type:"submit",disabled:c(i).processing,class:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50"},n(b.value?"Update":"Add"),9,vl)])],32)])])):y("",!0),k.value?(t(),o("div",{key:1,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",onClick:u[8]||(u[8]=ae(r=>k.value=!1,["self"]))},[e("div",xl,[e("h3",yl," Quick +1 "+n(l.goal.unit),1),e("p",pl,n(c(ve)(l.goal.current_value||0))+" â†’ "+n(c(ve)((l.goal.current_value||0)+1))+" "+n(l.goal.unit),1),e("form",{onSubmit:ae(L,["prevent"])},[e("div",ml,[u[17]||(u[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Note (optional) ",-1)),z(e("input",{"onUpdate:modelValue":u[6]||(u[6]=r=>h.value=r),type:"text",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500",placeholder:"e.g., Blog about Vue.js..."},null,512),[[te,h.value]])]),e("div",bl,[e("button",{type:"button",onClick:u[7]||(u[7]=r=>k.value=!1),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Cancel "),e("button",{type:"submit",disabled:B.value,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 font-medium"},n(B.value?"Adding...":"+1"),9,fl)])],32)])])):y("",!0)]))}},kl={class:"flex min-h-full items-center justify-center p-4"},wl={class:"flex items-center gap-3"},_l={class:"text-2xl"},$l={class:"text-lg font-bold text-gray-900 dark:text-white"},Cl={key:0,class:"text-sm text-indigo-600 dark:text-indigo-400 italic"},Ml={class:"px-4 py-3 bg-gray-50 dark:bg-gray-900/50"},Dl={class:"flex justify-between text-sm mb-1"},Sl={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Vl={class:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50"},Tl={key:0,class:"ml-1 px-1.5 py-0.5 text-xs bg-gray-200 dark:bg-gray-700 rounded-full"},Bl={key:0,class:"ml-1 px-1.5 py-0.5 text-xs bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 rounded-full"},Ll={key:0,class:"ml-1 px-1.5 py-0.5 text-xs bg-gray-200 dark:bg-gray-700 rounded-full"},jl={key:0,class:"ml-1 px-1.5 py-0.5 text-xs bg-gray-200 dark:bg-gray-700 rounded-full"},Fl={class:"overflow-y-auto flex-1"},Al={key:0,class:"sticky bottom-0 flex items-center justify-between p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},zl={key:1,class:"flex items-center gap-2"},El=["disabled"],Hl={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4"},Il={__name:"GoalEditModal",props:{goal:Object,categories:Array,coreGoalsCount:Number,show:Boolean},emits:["close","saved","deleted"],setup(l,{emit:P}){const p=l,b=P,i=_("info"),a=_(null),k=_(!1);me(()=>p.goal?.id,()=>{i.value="info",k.value=!1});const h=I=>{const u="flex-1 px-4 py-4 text-base font-semibold border-b-3 transition-colors whitespace-nowrap text-center flex items-center justify-center gap-1";return i.value===I?`${u} border-indigo-500 text-indigo-600 dark:text-indigo-400 bg-white dark:bg-gray-800`:`${u} border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800`},B=ee(()=>p.goal?.reminders?.filter(I=>I.is_active).length||0),C=ee(()=>{const I=p.goal?.progress||0;return I>=100?"bg-green-500":I>=75?"bg-emerald-500":I>=50?"bg-yellow-500":I>=25?"bg-orange-500":"bg-red-500"}),L=()=>{k.value=!0},R=()=>{k.value=!1,b("close")},U=()=>{k.value=!1},M=()=>{b("saved"),b("close")},E=()=>{b("deleted"),b("close")},H=I=>{I.key==="Escape"&&p.show&&L()};_e(()=>{document.addEventListener("keydown",H)}),Te(()=>{document.removeEventListener("keydown",H)});const O=()=>{a.value&&a.value.submit()},J=()=>{a.value&&a.value.confirmDelete()},Q=()=>{a.value&&a.value.deleteGoal()},oe=()=>{a.value&&a.value.cancelDelete()};return(I,u)=>(t(),ke(Fe,{to:"body"},[T(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:le(()=>[l.show?(t(),o("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:ae(L,["self"])},[e("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:L}),e("div",kl,[T(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:le(()=>[l.show&&l.goal?(t(),o("div",{key:0,class:"relative w-full max-w-4xl bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",onClick:u[5]||(u[5]=ae(()=>{},["stop"]))},[e("div",{class:"sticky top-0 z-10 flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",style:X({borderTopColor:l.goal.category?.color})},[e("div",wl,[e("span",_l,n(l.goal.category?.icon),1),e("div",null,[e("h2",$l,n(l.goal.title),1),l.goal.slogan?(t(),o("p",Cl,' "'+n(l.goal.slogan)+'" ',1)):y("",!0)])]),e("button",{onClick:L,class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[...u[6]||(u[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])],4),e("div",Ml,[e("div",Dl,[u[7]||(u[7]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Progress",-1)),e("span",{class:$(["font-bold",l.goal.progress>=100?"text-green-500":"text-gray-900 dark:text-white"])},n(l.goal.progress)+"% ",3)]),e("div",Sl,[e("div",{class:$(["h-full rounded-full transition-all duration-500",C.value]),style:X({width:`${l.goal.progress}%`})},null,6)])]),e("div",Vl,[e("button",{onClick:u[0]||(u[0]=r=>i.value="info"),class:$(h("info"))}," Info ",2),e("button",{onClick:u[1]||(u[1]=r=>i.value="milestones"),class:$(h("milestones"))},[u[8]||(u[8]=G(" Milestones ",-1)),l.goal.milestones?.length?(t(),o("span",Tl,n(l.goal.milestones.filter(r=>r.is_completed).length)+"/"+n(l.goal.milestones.length),1)):y("",!0)],2),e("button",{onClick:u[2]||(u[2]=r=>i.value="reminders"),class:$(h("reminders"))},[u[9]||(u[9]=G(" Reminders ",-1)),B.value?(t(),o("span",Bl,n(B.value),1)):y("",!0)],2),e("button",{onClick:u[3]||(u[3]=r=>i.value="references"),class:$(h("references"))},[u[10]||(u[10]=G(" Refs ",-1)),l.goal.references?.length?(t(),o("span",Ll,n(l.goal.references.length),1)):y("",!0)],2),e("button",{onClick:u[4]||(u[4]=r=>i.value="history"),class:$(h("history"))},[u[11]||(u[11]=G(" History ",-1)),l.goal.progress_logs?.length?(t(),o("span",jl,n(l.goal.progress_logs.length),1)):y("",!0)],2)]),e("div",Fl,[z(T(Xt,{ref_key:"infoTabRef",ref:a,goal:l.goal,categories:l.categories,"core-goals-count":l.coreGoalsCount,onSaved:M,onDeleted:E},null,8,["goal","categories","core-goals-count"]),[[de,i.value==="info"]]),z(T(Po,{goal:l.goal},null,8,["goal"]),[[de,i.value==="milestones"]]),z(T(Ls,{goal:l.goal},null,8,["goal"]),[[de,i.value==="reminders"]]),z(T(Hr,{goal:l.goal},null,8,["goal"]),[[de,i.value==="references"]]),z(T(hl,{goal:l.goal},null,8,["goal"]),[[de,i.value==="history"]])]),i.value==="info"?(t(),o("div",Al,[e("div",null,[a.value?.showDeleteConfirm?(t(),o("div",zl,[u[12]||(u[12]=e("span",{class:"text-sm text-red-600 dark:text-red-400"},"Confirm delete?",-1)),e("button",{type:"button",onClick:Q,class:"px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",disabled:a.value?.processing}," Delete ",8,El),e("button",{type:"button",onClick:oe,class:"px-3 py-1.5 text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 rounded-lg transition-colors text-sm"}," Cancel ")])):(t(),o("button",{key:0,type:"button",onClick:J,class:"px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors"}," Delete "))]),T(qe,{onClick:O,disabled:a.value?.processing},{default:le(()=>[...u[13]||(u[13]=[G(" Save ",-1)])]),_:1},8,["disabled"])])):y("",!0)])):y("",!0)]),_:1})]),T(we,{"enter-active-class":"transition ease-out duration-150","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:le(()=>[k.value?(t(),o("div",Hl,[e("div",{class:"absolute inset-0 bg-black/30",onClick:U}),e("div",{class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md w-full"},[e("div",{class:"text-center"},[u[14]||(u[14]=e("div",{class:"text-4xl mb-4"},"âš ï¸",-1)),u[15]||(u[15]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Unsaved Changes ",-1)),u[16]||(u[16]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Are you sure you want to leave? You will lose any unsaved changes. ",-1)),e("div",{class:"flex items-center justify-center gap-3"},[e("button",{onClick:U,class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Stay "),e("button",{onClick:R,class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"}," Leave ")])])])])):y("",!0)]),_:1})])):y("",!0)]),_:1})]))}},Ul={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Pl={class:"relative w-full max-w-3xl max-h-[90vh] overflow-hidden bg-white dark:bg-gray-800 rounded-2xl shadow-2xl flex flex-col"},Rl={class:"absolute top-3 left-3 flex items-center gap-2"},Gl={key:0,class:"px-2 py-1 text-xs font-medium rounded-full bg-white/20 backdrop-blur text-white"},Wl={key:1,class:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-500/80 backdrop-blur text-white"},Nl={class:"absolute bottom-3 left-4 right-4"},ql={key:0,class:"text-yellow-400 text-xs mb-1"},Ol={class:"text-xl font-bold text-white line-clamp-2"},Kl={key:1,class:"text-white/80 text-sm italic mt-1 line-clamp-1"},Xl={class:"px-4 py-2 bg-gray-50 dark:bg-gray-900/50 flex-shrink-0"},Yl={class:"flex justify-between text-sm mb-1"},Jl={class:"flex items-center gap-2"},Ql={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Zl={class:"flex border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex-shrink-0"},ea={key:0,class:"ml-1 text-xs opacity-70"},ta={key:0,class:"ml-1 text-xs text-green-500"},oa={key:0,class:"ml-1 text-xs opacity-70"},sa={class:"flex-1 overflow-y-auto p-4"},ra={class:"space-y-4"},la={key:0,class:"bg-indigo-50 dark:bg-indigo-900/30 rounded-lg p-3 text-center"},aa={class:"text-lg font-semibold text-indigo-600 dark:text-indigo-400"},na={class:"text-gray-500 dark:text-gray-400"},ia={key:1},da=["innerHTML"],ga={class:"grid grid-cols-2 gap-3"},ua={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3"},ca={class:"font-medium text-sm text-gray-900 dark:text-white"},va={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3"},xa={class:"font-medium text-sm text-gray-900 dark:text-white"},ya={key:0,class:"text-xs mt-1"},pa={key:0,class:"text-red-500 font-medium"},ma={key:1,class:"text-yellow-500 font-medium"},ba={key:2,class:"text-orange-500 font-medium"},fa={key:3,class:"text-green-500"},ha={class:"grid grid-cols-4 gap-2"},ka={class:"text-center p-2 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg"},wa={class:"text-lg font-bold text-indigo-600 dark:text-indigo-400"},_a={class:"text-center p-2 bg-amber-50 dark:bg-amber-900/30 rounded-lg"},$a={class:"text-lg font-bold text-amber-600 dark:text-amber-400"},Ca={class:"text-center p-2 bg-purple-50 dark:bg-purple-900/30 rounded-lg"},Ma={class:"text-lg font-bold text-purple-600 dark:text-purple-400"},Da={class:"text-center p-2 bg-green-50 dark:bg-green-900/30 rounded-lg"},Sa={class:"text-lg font-bold text-green-600 dark:text-green-400"},Va={key:0,class:"space-y-2"},Ta={class:"flex items-start gap-3"},Ba={class:"flex-1 min-w-0"},La={class:"flex items-center gap-2"},ja={key:0,class:"text-xs text-amber-600 dark:text-amber-400"},Fa={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Aa=["innerHTML"],za={key:2,class:"mt-2 pl-2 border-l-2 border-gray-200 dark:border-gray-600 space-y-1"},Ea={key:0,class:"text-xs text-gray-400 flex-shrink-0"},Ha={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Ia={key:0,class:"space-y-2"},Ua={class:"flex items-start justify-between gap-3"},Pa={class:"flex-1"},Ra={class:"flex items-center gap-2"},Ga={class:"text-sm font-medium text-gray-900 dark:text-white"},Wa={class:"text-xs text-gray-500 dark:text-gray-400 mt-1 space-y-0.5"},Na={key:0},qa={key:1},Oa={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Ka={key:0,class:"space-y-3"},Xa={key:0,class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3"},Ya={class:"flex items-start gap-3"},Ja={class:"flex-1 min-w-0"},Qa=["href"],Za={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate"},en={key:1,class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3"},tn={key:0,class:"font-medium text-sm text-gray-900 dark:text-white mb-2"},on=["href"],sn=["src","alt"],rn={class:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center"},ln={key:2,class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3"},an={class:"flex items-start gap-3"},nn={class:"flex-1 min-w-0"},dn=["href"],gn={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},un={key:3,class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3"},cn={class:"flex items-start gap-3"},vn={class:"flex-1 min-w-0"},xn={key:0,class:"font-medium text-sm text-gray-900 dark:text-white mb-2"},yn=["innerHTML"],pn={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},mn={key:0,class:"space-y-2"},bn={class:"flex items-center justify-between"},fn={class:"flex items-center gap-2"},hn={class:"text-lg font-semibold text-indigo-600 dark:text-indigo-400"},kn={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},wn={class:"text-xs text-gray-400"},_n={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},$n={key:0,class:"text-center text-xs text-gray-500 dark:text-gray-400 py-2"},Cn={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Mn={__name:"GoalDetailsModal",props:{show:Boolean,goal:Object},emits:["close","edit","deleted"],setup(l,{emit:P}){be.setOptions({breaks:!0,gfm:!0});const p=l,b=P,i=_("info");me(()=>p.goal?.id,()=>{i.value="info"});const a=()=>b("close"),k=()=>b("edit"),h=r=>{r.key==="Escape"&&p.show&&a()};_e(()=>{document.addEventListener("keydown",h)}),Te(()=>{document.removeEventListener("keydown",h)});const B=ee(()=>p.goal?p.goal.progress>=100?"bg-green-500":p.goal.progress>=75?"bg-emerald-500":p.goal.progress>=50?"bg-yellow-500":p.goal.progress>=25?"bg-orange-500":"bg-red-500":"bg-gray-300"),C=ee(()=>{const r={not_started:{text:"Not Started",class:"bg-gray-500",icon:"ðŸ“‹"},in_progress:{text:"In Progress",class:"bg-blue-500",icon:"ðŸš€"},completed:{text:"Completed",class:"bg-green-500",icon:"âœ…"},paused:{text:"Paused",class:"bg-yellow-500",icon:"â¸ï¸"},cancelled:{text:"Cancelled",class:"bg-red-500",icon:"âŒ"}};return r[p.goal?.status]||r.not_started}),L=ee(()=>{const r={high:{text:"High",class:"bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300",icon:"ðŸ”¥"},medium:{text:"Medium",class:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300",icon:"â­"},low:{text:"Low",class:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300",icon:"ðŸ“Œ"}};return r[p.goal?.priority]||r.medium}),R=r=>r?new Date(r).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):"â€”",U=r=>r?new Date(r).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”",M=ee(()=>{if(!p.goal?.target_date)return null;const r=new Date(p.goal.target_date);return Math.ceil((r-new Date)/(1e3*60*60*24))}),E=ee(()=>p.goal?.milestones?p.goal.milestones.filter(r=>r.is_completed&&!r.is_soft).length:0),H=ee(()=>p.goal?.milestones?p.goal.milestones.filter(r=>!r.is_soft).length:0),O=ee(()=>p.goal?.reminders?.filter(r=>r.is_active).length||0),J=r=>r?be.parse(r):"",Q=r=>{const d="flex-1 px-3 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap text-center";return i.value===r?`${d} border-indigo-500 text-indigo-600 dark:text-indigo-400`:`${d} border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300`},oe=r=>{switch(r.frequency){case"daily":return"Daily";case"weekly":const d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return`Weekly (${(r.days_of_week||[]).map(w=>d[w]).join(", ")||"Not set"})`;case"monthly":return`Monthly (Day ${r.day_of_month||1})`;case"specific_dates":return`${(r.specific_dates||[]).length} specific date(s)`;default:return r.frequency}},I=r=>{if(!r)return!1;const d=r.split(".").pop()?.toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(d)},u=()=>{p.goal&&confirm("Are you sure you want to delete this goal? This action cannot be undone.")&&K.delete(route("goals.destroy",p.goal.id),{preserveScroll:!0,onSuccess:()=>{b("deleted"),a()}})};return(r,d)=>(t(),ke(Fe,{to:"body"},[T(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:le(()=>[l.show&&l.goal?(t(),o("div",Ul,[e("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:a}),e("div",Pl,[e("div",{class:"relative h-40 bg-cover bg-center flex-shrink-0",style:X(l.goal.cover_image_url?{backgroundImage:`url(${l.goal.cover_image_url})`}:{backgroundColor:`${l.goal.category?.color}30`})},[d[6]||(d[6]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"},null,-1)),e("button",{onClick:a,class:"absolute top-3 right-3 p-2 bg-white/20 hover:bg-white/30 backdrop-blur rounded-full text-white transition-colors"},[...d[5]||(d[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",Rl,[l.goal.category?(t(),o("span",Gl,n(l.goal.category.icon)+" "+n(l.goal.category.name),1)):y("",!0),l.goal.is_core_goal?(t(),o("span",Wl," â­ Core ")):y("",!0)]),e("div",Nl,[l.goal.is_pinned?(t(),o("div",ql,"ðŸ“ Pinned")):y("",!0),e("h2",Ol,n(l.goal.title),1),l.goal.slogan?(t(),o("p",Kl,' "'+n(l.goal.slogan)+'" ',1)):y("",!0)])],4),e("div",Xl,[e("div",Yl,[e("div",Jl,[e("span",{class:$(["inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full text-white",C.value.class])},n(C.value.text),3),e("span",{class:$(["inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full",L.value.class])},n(L.value.icon)+" "+n(L.value.text),3)]),e("span",{class:$(["font-bold",l.goal.progress>=100?"text-green-500":"text-gray-900 dark:text-white"])},n(l.goal.progress)+"% ",3)]),e("div",Ql,[e("div",{class:$(["h-full rounded-full transition-all duration-500",B.value]),style:X({width:`${l.goal.progress}%`})},null,6)])]),e("div",Zl,[e("button",{onClick:d[0]||(d[0]=g=>i.value="info"),class:$(Q("info"))}," ðŸ“‹ Info ",2),e("button",{onClick:d[1]||(d[1]=g=>i.value="milestones"),class:$(Q("milestones"))},[d[7]||(d[7]=G(" ðŸŽ¯ Milestones ",-1)),l.goal.milestones?.length?(t(),o("span",ea," ("+n(E.value)+"/"+n(H.value)+") ",1)):y("",!0)],2),e("button",{onClick:d[2]||(d[2]=g=>i.value="reminders"),class:$(Q("reminders"))},[d[8]||(d[8]=G(" ðŸ”” Reminders ",-1)),O.value?(t(),o("span",ta," ("+n(O.value)+") ",1)):y("",!0)],2),e("button",{onClick:d[3]||(d[3]=g=>i.value="refs"),class:$(Q("refs"))},[d[9]||(d[9]=G(" ðŸ“š Refs ",-1)),l.goal.references?.length?(t(),o("span",oa," ("+n(l.goal.references.length)+") ",1)):y("",!0)],2),e("button",{onClick:d[4]||(d[4]=g=>i.value="history"),class:$(Q("history"))}," ðŸ“ˆ History ",2)]),e("div",sa,[z(e("div",ra,[l.goal.target_value&&l.goal.unit?(t(),o("div",la,[e("span",aa,n(c(ve)(l.goal.current_value||0)),1),e("span",na," / "+n(c(ve)(l.goal.target_value))+" "+n(l.goal.unit),1)])):y("",!0),l.goal.description?(t(),o("div",ia,[d[10]||(d[10]=e("h3",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"Description",-1)),e("div",{class:"text-gray-700 dark:text-gray-300 text-sm prose prose-sm prose-gray dark:prose-invert max-w-none",innerHTML:J(l.goal.description)},null,8,da)])):y("",!0),e("div",ga,[e("div",ua,[d[11]||(d[11]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Start Date",-1)),e("div",ca,n(R(l.goal.start_date)),1)]),e("div",va,[d[12]||(d[12]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Target Date",-1)),e("div",xa,n(R(l.goal.target_date)),1),M.value!==null?(t(),o("div",ya,[M.value<0?(t(),o("span",pa,n(Math.abs(M.value))+" days overdue ",1)):M.value===0?(t(),o("span",ma," Due today! ")):M.value<=7?(t(),o("span",ba,n(M.value)+" days left ",1)):(t(),o("span",fa,n(M.value)+" days left ",1))])):y("",!0)])]),e("div",ha,[e("div",ka,[e("div",wa,n(l.goal.milestones?.length||0),1),d[13]||(d[13]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Milestones",-1))]),e("div",_a,[e("div",$a,n(O.value),1),d[14]||(d[14]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Reminders",-1))]),e("div",Ca,[e("div",Ma,n(l.goal.references?.length||0),1),d[15]||(d[15]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"References",-1))]),e("div",Da,[e("div",Sa,n(l.goal.progress_logs?.length||0),1),d[16]||(d[16]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Logs",-1))])])],512),[[de,i.value==="info"]]),z(e("div",null,[l.goal.milestones?.length?(t(),o("div",Va,[(t(!0),o(Y,null,Z(l.goal.milestones,g=>(t(),o("div",{key:g.id,class:$(["rounded-lg p-3",g.is_soft?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":"bg-gray-50 dark:bg-gray-700/50"])},[e("div",Ta,[e("span",{class:$(["flex-shrink-0 mt-0.5",g.is_completed?"text-green-500":g.is_soft?"text-amber-500":"text-gray-400"])},n(g.is_completed?"âœ“":g.is_soft?"ðŸ””":"â—‹"),3),e("div",Ba,[e("div",La,[e("span",{class:$(["font-medium text-sm",g.is_completed?"text-gray-400 line-through":"text-gray-900 dark:text-white"])},n(g.title),3),g.is_soft?(t(),o("span",ja,"(soft)")):y("",!0)]),g.description?(t(),o("p",Fa,n(g.description),1)):y("",!0),g.memo?(t(),o("div",{key:1,class:"text-xs text-gray-600 dark:text-gray-400 mt-1 prose prose-xs prose-gray dark:prose-invert max-w-none",innerHTML:J(g.memo)},null,8,Aa)):y("",!0),g.todos?.length?(t(),o("div",za,[(t(!0),o(Y,null,Z(g.todos,D=>(t(),o("div",{key:D.id,class:"flex items-center gap-2 text-xs"},[e("span",{class:$(D.is_completed?"text-green-500":"text-gray-400")},n(D.is_completed?"âœ“":"â—‹"),3),e("span",{class:$(D.is_completed?"text-gray-400 line-through":"text-gray-600 dark:text-gray-400")},n(D.title),3)]))),128))])):y("",!0)]),g.due_date?(t(),o("span",Ea,n(R(g.due_date)),1)):y("",!0)])],2))),128))])):(t(),o("div",Ha,[...d[17]||(d[17]=[e("div",{class:"text-3xl mb-2"},"ðŸŽ¯",-1),e("p",{class:"text-sm"},"No milestones yet",-1)])]))],512),[[de,i.value==="milestones"]]),z(e("div",null,[l.goal.reminders?.length?(t(),o("div",Ia,[(t(!0),o(Y,null,Z(l.goal.reminders,g=>(t(),o("div",{key:g.id,class:$(["bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",{"opacity-50":!g.is_active}])},[e("div",Ua,[e("div",Pa,[e("div",Ra,[e("span",Ga,n(g.title||"Reminder"),1),e("span",{class:$(["px-1.5 py-0.5 text-xs rounded",g.is_active?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400":"bg-gray-200 text-gray-600 dark:bg-gray-600 dark:text-gray-400"])},n(g.is_active?"Active":"Inactive"),3)]),e("div",Wa,[e("div",null,"ðŸ“… "+n(oe(g)),1),g.reminder_time?(t(),o("div",Na,"â° "+n(g.reminder_time),1)):y("",!0),g.type?(t(),o("div",qa," ðŸ“Œ "+n(g.type==="progress"?"Progress Update":g.type==="deadline"?"Deadline":"Custom"),1)):y("",!0)])])])],2))),128))])):(t(),o("div",Oa,[...d[18]||(d[18]=[e("div",{class:"text-3xl mb-2"},"ðŸ””",-1),e("p",{class:"text-sm"},"No reminders set",-1)])]))],512),[[de,i.value==="reminders"]]),z(e("div",null,[l.goal.references?.length?(t(),o("div",Ka,[(t(!0),o(Y,null,Z(l.goal.references,g=>(t(),o(Y,{key:g.id},[g.type==="link"?(t(),o("div",Xa,[e("div",Ya,[d[19]||(d[19]=e("span",{class:"text-lg flex-shrink-0"},"ðŸ”—",-1)),e("div",Ja,[e("a",{href:g.url,target:"_blank",class:"font-medium text-sm text-indigo-600 dark:text-indigo-400 hover:underline block"},n(g.title||g.url),9,Qa),g.title&&g.url?(t(),o("div",Za,n(g.url),1)):y("",!0)])])])):g.type==="file"&&I(g.file_name)?(t(),o("div",en,[g.title?(t(),o("div",tn,n(g.title),1)):y("",!0),e("a",{href:`/storage/${g.file_path}`,target:"_blank",class:"block"},[e("img",{src:`/storage/${g.file_path}`,alt:g.title||g.file_name,class:"max-w-full max-h-64 rounded-lg object-contain mx-auto hover:opacity-90 transition-opacity"},null,8,sn)],8,on),e("div",rn,n(g.file_name)+" ("+n(Math.round((g.file_size||0)/1024))+"KB) ",1)])):g.type==="file"?(t(),o("div",ln,[e("div",an,[d[20]||(d[20]=e("span",{class:"text-lg flex-shrink-0"},"ðŸ“Ž",-1)),e("div",nn,[e("a",{href:`/storage/${g.file_path}`,target:"_blank",class:"font-medium text-sm text-indigo-600 dark:text-indigo-400 hover:underline"},n(g.title||g.file_name),9,dn),e("div",gn,n(g.file_name)+" ("+n(Math.round((g.file_size||0)/1024))+"KB) ",1)])])])):g.type==="text"?(t(),o("div",un,[e("div",cn,[d[21]||(d[21]=e("span",{class:"text-lg flex-shrink-0"},"ðŸ“",-1)),e("div",vn,[g.title?(t(),o("div",xn,n(g.title),1)):y("",!0),g.content?(t(),o("div",{key:1,class:"prose prose-sm prose-gray dark:prose-invert max-w-none",innerHTML:J(g.content)},null,8,yn)):y("",!0)])])])):y("",!0)],64))),128))])):(t(),o("div",pn,[...d[22]||(d[22]=[e("div",{class:"text-3xl mb-2"},"ðŸ“š",-1),e("p",{class:"text-sm"},"No references added",-1)])]))],512),[[de,i.value==="refs"]]),z(e("div",null,[l.goal.progress_logs?.length?(t(),o("div",mn,[(t(!0),o(Y,null,Z(l.goal.progress_logs.slice().reverse().slice(0,20),g=>(t(),o("div",{key:g.id,class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3"},[e("div",bn,[e("div",fn,[e("span",hn,n(c(ve)(g.new_value)),1),l.goal.unit?(t(),o("span",kn,n(l.goal.unit),1)):y("",!0)]),e("span",wn,n(U(g.logged_at||g.created_at)),1)]),g.note?(t(),o("p",_n,n(g.note),1)):y("",!0)]))),128)),l.goal.progress_logs.length>20?(t(),o("div",$n," Showing latest 20 of "+n(l.goal.progress_logs.length)+" logs ",1)):y("",!0)])):(t(),o("div",Cn,[...d[23]||(d[23]=[e("div",{class:"text-3xl mb-2"},"ðŸ“ˆ",-1),e("p",{class:"text-sm"},"No progress logs yet",-1)])]))],512),[[de,i.value==="history"]])]),e("div",{class:"flex items-center justify-between gap-3 px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex-shrink-0"},[e("button",{onClick:u,class:"px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30 rounded-lg transition-colors"}," ðŸ—‘ï¸ Delete "),e("div",{class:"flex items-center gap-2"},[e("button",{onClick:a,class:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Close "),e("button",{onClick:k,class:"px-4 py-1.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"}," âœï¸ Edit ")])])])])):y("",!0)]),_:1})]))}},Dn={class:"absolute inset-0 overflow-hidden pointer-events-none z-20"},Sn=1200,Vn=20,Tn={__name:"ThemeWordsWaterfall",props:{containerWidth:{type:Number,default:900},containerHeight:{type:Number,default:900}},setup(l){const P=l,p=[{word:"ThÃ nh cÃ´ng",color:"#10B981"},{word:"Chiáº¿n tháº¯ng",color:"#059669"},{word:"Vinh quang",color:"#047857"},{word:"VÃ´ Ä‘á»‹ch",color:"#065F46"},{word:"Xuáº¥t sáº¯c",color:"#10B981"},{word:"HoÃ n thÃ nh",color:"#34D399"},{word:"Äáº¡t Ä‘Æ°á»£c",color:"#6EE7B7"},{word:"Tuyá»‡t vá»i",color:"#059669"},{word:"Phi thÆ°á»ng",color:"#047857"},{word:"VÄ© Ä‘áº¡i",color:"#065F46"},{word:"PhÃ¡t triá»ƒn",color:"#8B5CF6"},{word:"Tiáº¿n bá»™",color:"#7C3AED"},{word:"Thay Ä‘á»•i",color:"#6D28D9"},{word:"Äá»™t phÃ¡",color:"#5B21B6"},{word:"Cáº£i thiá»‡n",color:"#8B5CF6"},{word:"Ná»Ÿ rá»™",color:"#A78BFA"},{word:"Thá»‹nh vÆ°á»£ng",color:"#C4B5FD"},{word:"Má»Ÿ rá»™ng",color:"#7C3AED"},{word:"TrÆ°á»Ÿng thÃ nh",color:"#6D28D9"},{word:"VÆ°Æ¡n lÃªn",color:"#5B21B6"},{word:"Äá»™ng lá»±c",color:"#F59E0B"},{word:"NÄƒng lÆ°á»£ng",color:"#D97706"},{word:"Äam mÃª",color:"#B45309"},{word:"Nhiá»‡t huyáº¿t",color:"#92400E"},{word:"KhÃ¡t vá»ng",color:"#F59E0B"},{word:"Quyáº¿t tÃ¢m",color:"#FBBF24"},{word:"KiÃªn trÃ¬",color:"#FCD34D"},{word:"Cá»‘ng hiáº¿n",color:"#D97706"},{word:"Cam káº¿t",color:"#B45309"},{word:"Táº­p trung",color:"#92400E"},{word:"Háº¡nh phÃºc",color:"#EC4899"},{word:"Vui váº»",color:"#DB2777"},{word:"An láº¡c",color:"#BE185D"},{word:"ThÃ­ch thÃº",color:"#9D174D"},{word:"Ráº¡ng rá»¡",color:"#EC4899"},{word:"TÆ°Æ¡i sÃ¡ng",color:"#F472B6"},{word:"Sá»‘ng Ä‘á»™ng",color:"#F9A8D4"},{word:"Pháº¥n khá»Ÿi",color:"#DB2777"},{word:"HÃ¢n hoan",color:"#BE185D"},{word:"Sung sÆ°á»›ng",color:"#9D174D"},{word:"Máº¡nh máº½",color:"#EF4444"},{word:"Sá»©c máº¡nh",color:"#DC2626"},{word:"HÃ¹ng máº¡nh",color:"#B91C1C"},{word:"DÅ©ng mÃ£nh",color:"#991B1B"},{word:"TÃ¡o báº¡o",color:"#EF4444"},{word:"DÅ©ng cáº£m",color:"#F87171"},{word:"VÃ´ Ãºy",color:"#FCA5A5"},{word:"Can Ä‘áº£m",color:"#DC2626"},{word:"KiÃªn cÆ°á»ng",color:"#B91C1C"},{word:"Báº¥t khuáº¥t",color:"#991B1B"},{word:"BÃ¬nh yÃªn",color:"#06B6D4"},{word:"Thanh tháº£n",color:"#0891B2"},{word:"TÄ©nh láº·ng",color:"#0E7490"},{word:"An nhiÃªn",color:"#155E75"},{word:"HÃ i hÃ²a",color:"#06B6D4"},{word:"CÃ¢n báº±ng",color:"#22D3EE"},{word:"Äiá»m tÄ©nh",color:"#67E8F9"},{word:"Tá»‰nh thá»©c",color:"#0891B2"},{word:"ThÆ° thÃ¡i",color:"#0E7490"},{word:"Nháº¹ nhÃ ng",color:"#155E75"},{word:"YÃªu thÆ°Æ¡ng",color:"#F43F5E"},{word:"NhÃ¢n Ã¡i",color:"#E11D48"},{word:"Tá»« bi",color:"#BE123C"},{word:"Quan tÃ¢m",color:"#9F1239"},{word:"áº¤m Ã¡p",color:"#F43F5E"},{word:"Dá»‹u dÃ ng",color:"#FB7185"},{word:"Hiá»n hÃ²a",color:"#FDA4AF"},{word:"Tháº¥u hiá»ƒu",color:"#E11D48"},{word:"ÄoÃ n káº¿t",color:"#BE123C"},{word:"Gáº¯n bÃ³",color:"#9F1239"},{word:"SÃ¡ng táº¡o",color:"#6366F1"},{word:"Cáº£m há»©ng",color:"#4F46E5"},{word:"TÆ°á»Ÿng tÆ°á»£ng",color:"#4338CA"},{word:"Æ¯á»›c mÆ¡",color:"#3730A3"},{word:"Äá»•i má»›i",color:"#6366F1"},{word:"Xuáº¥t chÃºng",color:"#818CF8"},{word:"TÃ i nÄƒng",color:"#A5B4FC"},{word:"Táº§m nhÃ¬n",color:"#4F46E5"},{word:"Ká»³ diá»‡u",color:"#4338CA"},{word:"PhÃ©p mÃ u",color:"#3730A3"},{word:"Tá»± do",color:"#14B8A6"},{word:"PhiÃªu lÆ°u",color:"#0D9488"},{word:"KhÃ¡m phÃ¡",color:"#0F766E"},{word:"PhÃ¡t hiá»‡n",color:"#115E59"},{word:"HÃ nh trÃ¬nh",color:"#14B8A6"},{word:"Lang thang",color:"#2DD4BF"},{word:"Rong ruá»•i",color:"#5EEAD4"},{word:"Bay cao",color:"#0D9488"},{word:"VÆ°Æ¡n xa",color:"#0F766E"},{word:"Trá»—i dáº­y",color:"#115E59"},{word:"TrÃ­ tuá»‡",color:"#84CC16"},{word:"Kiáº¿n thá»©c",color:"#65A30D"},{word:"Há»c há»i",color:"#4D7C0F"},{word:"Lá»›n lÃªn",color:"#3F6212"},{word:"Khai sÃ¡ng",color:"#84CC16"},{word:"ThÃ´ng tuá»‡",color:"#A3E635"},{word:"SÃ¡ng suá»‘t",color:"#BEF264"},{word:"ChÃ¢n lÃ½",color:"#65A30D"},{word:"Hiá»ƒu biáº¿t",color:"#4D7C0F"},{word:"Tá»‰nh tÃ¡o",color:"#3F6212"}],b=_([]);let i=null,a=0;const k=()=>{if(p.length===0||b.value.length>=Vn)return;const B=p[Math.floor(Math.random()*p.length)],C={id:Date.now()+Math.random(),...B,x:Math.random()*(P.containerWidth-100)+50,y:-50,speed:.3+Math.random()*.7,opacity:.4+Math.random()*.6,scale:.7+Math.random()*.5,rotation:(Math.random()-.5)*20};b.value.push(C)},h=B=>{B-a>Sn&&(k(),a=B),b.value=b.value.map(C=>({...C,y:C.y+C.speed,opacity:C.y>P.containerHeight*.7?Math.max(0,C.opacity-.02):C.opacity})).filter(C=>C.y<P.containerHeight+50&&C.opacity>0),i=requestAnimationFrame(h)};return _e(()=>{for(let B=0;B<8;B++)setTimeout(()=>{const C=p[Math.floor(Math.random()*p.length)];b.value.push({id:Date.now()+Math.random(),...C,x:Math.random()*(P.containerWidth-100)+50,y:Math.random()*P.containerHeight*.5,speed:.3+Math.random()*.7,opacity:.4+Math.random()*.6,scale:.7+Math.random()*.5,rotation:(Math.random()-.5)*20})},B*150);i=requestAnimationFrame(h)}),Te(()=>{i&&cancelAnimationFrame(i)}),(B,C)=>(t(),o("div",Dn,[(t(!0),o(Y,null,Z(b.value,L=>(t(),o("div",{key:L.id,class:"absolute waterfall-word",style:X({left:L.x+"px",top:L.y+"px",opacity:L.opacity,transform:`scale(${L.scale}) rotate(${L.rotation}deg)`})},[e("span",{class:"px-4 py-2 rounded-full font-bold text-base whitespace-nowrap shadow-md",style:X({backgroundColor:L.color+"40",color:L.color,textShadow:"0 1px 2px rgba(0,0,0,0.3)",border:`1px solid ${L.color}50`,backdropFilter:"blur(4px)"})},n(L.word),5)],4))),128))]))}},Bn=Ae(Tn,[["__scopeId","data-v-be79468c"]]),Ln={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 max-w-xs"},jn={class:"flex items-center justify-between mb-4"},Fn={class:"flex gap-2 mb-4"},An={class:"space-y-2 mb-4 max-h-40 overflow-y-auto"},zn={class:"flex items-center gap-2"},En={class:"text-sm text-gray-900 dark:text-white truncate max-w-[120px]"},Hn={class:"flex gap-1 flex-shrink-0"},In=["onClick"],Un=["onClick"],Pn={key:0,class:"text-center py-3 text-gray-500 dark:text-gray-400 text-xs"},Rn={key:0,class:"border-t dark:border-gray-600 pt-3"},Gn={class:"space-y-3"},Wn={class:"flex flex-wrap gap-1.5"},Nn=["onClick"],qn={class:"flex gap-2"},On=["disabled"],Kn=["disabled"],Xn={__name:"ThemeWordsManager",props:{words:{type:Array,default:()=>[]},currentEffect:{type:String,default:"orbit"}},emits:["close"],setup(l,{emit:P}){const p=P,b=_(!1),i=_(null),a=$e({word:"",color:"#6366F1"}),k=["#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#EC4899","#6366F1"],h=()=>{a.post(route("theme-words.store"),{preserveScroll:!0,onSuccess:()=>{a.reset(),b.value=!1}})},B=M=>{i.value=M,a.word=M.word,a.color=M.color,b.value=!0},C=()=>{a.put(route("theme-words.update",i.value.id),{preserveScroll:!0,onSuccess:()=>{i.value=null,a.reset(),b.value=!1}})},L=M=>{confirm("Xoa tu ngu nay?")&&K.delete(route("theme-words.destroy",M.id),{preserveScroll:!0})},R=()=>{b.value=!1,i.value=null,a.reset(),a.color="#6366F1"},U=M=>{K.patch(route("theme-words.effect"),{effect:M},{preserveScroll:!0})};return(M,E)=>(t(),o("div",Ln,[e("div",jn,[E[8]||(E[8]=e("h3",{class:"font-bold text-gray-900 dark:text-white text-sm"}," Theme Words ",-1)),e("button",{onClick:E[0]||(E[0]=H=>p("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...E[7]||(E[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Fn,[e("button",{onClick:E[1]||(E[1]=H=>U("orbit")),class:$(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors",l.currentEffect==="orbit"?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])}," Orbit ",2),e("button",{onClick:E[2]||(E[2]=H=>U("waterfall")),class:$(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors",l.currentEffect==="waterfall"?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])}," Waterfall ",2)]),e("div",An,[(t(!0),o(Y,null,Z(l.words,H=>(t(),o("div",{key:H.id,class:"flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-gray-700"},[e("div",zn,[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:X({backgroundColor:H.color})},null,4),e("span",En,n(H.word),1)]),e("div",Hn,[e("button",{onClick:O=>B(H),class:"p-1 text-gray-400 hover:text-indigo-600 text-xs",title:"Edit"},[...E[9]||(E[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,In),e("button",{onClick:O=>L(H),class:"p-1 text-gray-400 hover:text-red-600 text-xs",title:"Delete"},[...E[10]||(E[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Un)])]))),128)),l.words.length===0?(t(),o("div",Pn," Chua co theme words ")):y("",!0)]),b.value?(t(),o("div",Rn,[e("div",Gn,[z(e("input",{"onUpdate:modelValue":E[3]||(E[3]=H=>c(a).word=H),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-indigo-500 focus:border-indigo-500",placeholder:"VD: Kien tri, Ben bi...",maxlength:"50",onKeyup:E[4]||(E[4]=De(H=>i.value?C():h(),["enter"]))},null,544),[[te,c(a).word]]),e("div",Wn,[(t(),o(Y,null,Z(k,H=>e("button",{key:H,onClick:O=>c(a).color=H,class:$(["w-5 h-5 rounded-full border-2 transition-transform hover:scale-110",c(a).color===H?"scale-110 border-gray-900 dark:border-white":"border-transparent"]),style:X({backgroundColor:H})},null,14,Nn)),64)),z(e("input",{"onUpdate:modelValue":E[5]||(E[5]=H=>c(a).color=H),type:"color",class:"w-5 h-5 rounded cursor-pointer border-0"},null,512),[[te,c(a).color]])]),e("div",qn,[i.value?(t(),o("button",{key:0,onClick:C,class:"flex-1 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",disabled:c(a).processing||!c(a).word}," Cap nhat ",8,On)):(t(),o("button",{key:1,onClick:h,class:"flex-1 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",disabled:c(a).processing||!c(a).word}," Them ",8,Kn)),e("button",{onClick:R,class:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"}," Huy ")])])])):y("",!0),b.value?y("",!0):(t(),o("button",{key:1,onClick:E[6]||(E[6]=H=>b.value=!0),class:"w-full py-2 mt-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-indigo-500 hover:text-indigo-600 transition-colors text-sm"}," + Them tu ngu "))]))}},Yn={class:"flex items-center justify-between"},Jn={key:0,class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8"},Qn={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow"},Zn={class:"text-3xl font-bold text-gray-900 dark:text-white"},ei={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow"},ti={class:"text-3xl font-bold text-green-500"},oi={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow"},si={class:"text-3xl font-bold text-blue-500"},ri={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow"},li={class:"text-3xl font-bold text-gray-500"},ai={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow"},ni={class:"text-3xl font-bold text-indigo-500"},ii={class:"mt-2 h-2 bg-gray-200 dark:bg-gray-700 rounded-full"},di={key:1,class:"mb-6"},gi={class:"flex flex-wrap items-center gap-3"},ui=["value","title"],ci={class:"flex items-center gap-2"},vi=["href"],xi=["href"],yi={key:2,class:"relative overflow-hidden"},pi={class:"absolute inset-0 flex items-center justify-center pointer-events-none"},mi={key:0,class:"absolute inset-0 flex items-center justify-center"},bi={class:"text-center"},fi={key:0,class:"absolute bottom-16 right-4 z-20"},hi={key:3,class:"space-y-8"},ki={key:0,class:"mb-8"},wi={class:"space-y-4"},_i={class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},$i={class:"flex items-center justify-between"},Ci=["onClick"],Mi={class:"text-2xl"},Di={class:"font-semibold text-gray-900 dark:text-white hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"},Si={class:"text-sm text-gray-500 dark:text-gray-400"},Vi={class:"flex items-center gap-4"},Ti={class:"text-right"},Bi={class:"w-24 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Li=["onClick"],ji={class:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50"},Fi={class:"p-4 space-y-2"},Ai={class:"flex items-center gap-3 p-2"},zi=["onClick"],Ei={key:0,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},Hi={class:"flex-1 min-w-0"},Ii={class:"flex items-center gap-2"},Ui={key:0,class:"text-amber-500",title:"Soft milestone - reminder only, doesn't count toward progress"},Pi={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Ri=["innerHTML"],Gi={class:"flex items-center gap-2 flex-shrink-0"},Wi=["onClick","title"],Ni={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},qi={key:0,class:"ml-8 pb-2 pr-2 space-y-1"},Oi=["onClick"],Ki={key:0,class:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20"},Xi={key:0,class:"text-xs text-gray-400"},Yi={key:0,class:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm"},Ji={class:"px-4 pb-4"},Qi={class:"mb-8"},Zi={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ed={key:0},td={key:1},od={key:1,class:"text-center py-16"},sd={__name:"Index",props:{goals:Array,coreGoals:Array,regularGoals:Array,goalsByCategory:Object,categories:Array,stats:Object,view:String,themeWords:Array,themeWordsEffect:String},setup(l){be.setOptions({breaks:!0,gfm:!0});const P=V=>V?be.parse(V):"",p=l,b=ee(()=>p.view||"visionboard"),i=_({}),a=_(null),k=_(!1),h=_("all"),B=_("all"),C=_("all"),L=_(!1),R=_(!1),U=_(null),M=ee(()=>U.value&&p.goals.find(V=>V.id===U.value)||null),E=_(!1),H=ee(()=>M.value&&M.value.is_core_goal?(p.coreGoals?.length||0)-1:p.coreGoals?.length||0),O=V=>{U.value=V.id,R.value=!0},J=()=>{R.value=!1,U.value=null},Q=()=>{R.value=!1,L.value=!0},oe=()=>{L.value=!1,U.value=null},I=()=>{K.reload({preserveScroll:!0})},u=()=>{K.reload({preserveScroll:!0})};_e(()=>{const m=new URLSearchParams(window.location.search).get("editGoal");if(m){const j=parseInt(m);p.goals.find(Ee=>Ee.id===j)&&(U.value=j,L.value=!0);const re=new URL(window.location);re.searchParams.delete("editGoal"),window.history.replaceState({},"",re)}});const r=_(900),d=_(700),g=_(900),D=_(300),w=()=>{const V=window.innerWidth,m=window.innerHeight;r.value=V-20,d.value=m-100,g.value=Math.min(r.value,d.value),V<480?D.value=110:V<640?D.value=150:V<768?D.value=180:V<1024?D.value=230:D.value=300};typeof window<"u"&&(w(),window.addEventListener("resize",w));const A=_([...p.goals]);me(()=>p.goals,V=>{A.value=[...V]},{deep:!0});const N=_(p.goals.filter(V=>V.is_pinned)),x=_(p.goals.filter(V=>!V.is_pinned));me(()=>p.goals,V=>{N.value=V.filter(m=>m.is_pinned),x.value=V.filter(m=>!m.is_pinned)},{deep:!0});const s={"career-finance":"Sá»± nghiá»‡p, thu nháº­p, Ä‘áº§u tÆ°, quáº£n lÃ½ ná»£","health-fitness":"Sá»©c khá»e thá»ƒ cháº¥t, táº­p luyá»‡n, dinh dÆ°á»¡ng",relationships:"Gia Ä‘Ã¬nh, báº¡n bÃ¨, tÃ¬nh yÃªu, má»‘i quan há»‡","personal-growth":"Há»c há»i, ká»¹ nÄƒng, chá»©ng chá»‰, phÃ¡t triá»ƒn báº£n thÃ¢n","travel-experiences":"Du lá»‹ch, phiÃªu lÆ°u, tráº£i nghiá»‡m má»›i","creativity-hobbies":"Dá»± Ã¡n sÃ¡ng táº¡o, sá»Ÿ thÃ­ch, side projects","mindfulness-spirituality":"Thiá»n Ä‘á»‹nh, biáº¿t Æ¡n, sá»©c khá»e tinh tháº§n","giving-back":"Tá»« thiá»‡n, tÃ¬nh nguyá»‡n, Ä‘Ã³ng gÃ³p cá»™ng Ä‘á»“ng"},v=V=>s[V.slug]||V.description||"",F=V=>{i.value[V]=!i.value[V]},q=(V,m)=>{K.patch(route("milestones.toggle",[V,m.id]),{},{preserveScroll:!0,preserveState:!0})},f=(V,m,j)=>{K.patch(route("milestone-todos.toggle",[V,m.id,j.id]),{},{preserveScroll:!0,preserveState:!0})},S=_({}),se=V=>{if(h.value==="all")return!0;const m=new Date,j=V.target_date?new Date(V.target_date):null;if(h.value==="past")return j&&j<m;if(h.value==="3months"){const W=new Date(m);return W.setMonth(W.getMonth()+3),j&&j>=m&&j<=W}if(h.value==="6months"){const W=new Date(m);return W.setMonth(W.getMonth()+6),j&&j>=m&&j<=W}return!0},ge=V=>B.value==="all"?!0:V.status===B.value,ce=V=>C.value==="all"?!0:V.priority===C.value,xe=V=>(!a.value||V.category_id===a.value)&&se(V)&&ge(V)&&ce(V),Be={in_progress:0,not_started:1,paused:2,cancelled:3,completed:4},fe=V=>[...V].sort((m,j)=>(Be[m.status]??99)-(Be[j.status]??99)),ue=ee(()=>{const V=p.coreGoals||[];return fe(V.filter(xe))}),ze=ee(()=>{const V=p.regularGoals||[];return fe(V.filter(xe))}),Le=_(fe(p.regularGoals||[]));me(()=>p.regularGoals,V=>{Le.value=fe(V||[])},{deep:!0});const Ie=()=>{k.value=!1;const m=[...N.value,...x.value].map((j,W)=>({id:j.id,sort_order:W}));K.post(route("goals.reorder"),{goals:m},{preserveScroll:!0,preserveState:!0})};return(V,m)=>(t(),o(Y,null,[T(c(Re),{title:"Vision Board 2026"}),T(We,null,Ge({default:le(()=>[e("div",{class:$(b.value==="visionboard"?"py-2":"py-6")},[e("div",{class:$(b.value==="visionboard"?"px-2":"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8")},[b.value==="plan"?(t(),o("div",Jn,[e("div",Qn,[e("div",Zn,n(l.stats.total),1),m[11]||(m[11]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Goals",-1))]),e("div",ei,[e("div",ti,n(l.stats.completed),1),m[12]||(m[12]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Completed",-1))]),e("div",oi,[e("div",si,n(l.stats.in_progress),1),m[13]||(m[13]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"In Progress",-1))]),e("div",ri,[e("div",li,n(l.stats.not_started),1),m[14]||(m[14]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Not Started",-1))]),e("div",ai,[e("div",ni,n(l.stats.overall_progress)+"%",1),m[15]||(m[15]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Overall Progress",-1)),e("div",ii,[e("div",{class:"h-full bg-indigo-500 rounded-full transition-all duration-500",style:X({width:`${l.stats.overall_progress}%`})},null,4)])])])):y("",!0),b.value==="plan"?(t(),o("div",di,[e("div",gi,[z(e("select",{"onUpdate:modelValue":m[0]||(m[0]=j=>h.value=j),class:"px-3 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:text-gray-200"},[...m[16]||(m[16]=[e("option",{value:"all"},"ðŸ“… All Time",-1),e("option",{value:"3months"},"ðŸ“… Next 3 Months",-1),e("option",{value:"6months"},"ðŸ“… Next 6 Months",-1),e("option",{value:"past"},"ðŸ“… Past",-1)])],512),[[ye,h.value]]),z(e("select",{"onUpdate:modelValue":m[1]||(m[1]=j=>B.value=j),class:"px-3 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:text-gray-200"},[...m[17]||(m[17]=[e("option",{value:"all"},"ðŸ“Š All Status",-1),e("option",{value:"in_progress"},"ðŸš€ In Progress",-1),e("option",{value:"not_started"},"ðŸ“‹ Not Started",-1),e("option",{value:"completed"},"âœ… Completed",-1),e("option",{value:"paused"},"â¸ï¸ Paused",-1),e("option",{value:"cancelled"},"âŒ Cancelled",-1)])],512),[[ye,B.value]]),z(e("select",{"onUpdate:modelValue":m[2]||(m[2]=j=>C.value=j),class:"px-3 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:text-gray-200"},[...m[18]||(m[18]=[e("option",{value:"all"},"ðŸŽ¯ All Priority",-1),e("option",{value:"high"},"ðŸ”´ High Priority",-1),e("option",{value:"medium"},"ðŸŸ¡ Medium Priority",-1),e("option",{value:"low"},"ðŸŸ¢ Low Priority",-1)])],512),[[ye,C.value]]),z(e("select",{"onUpdate:modelValue":m[3]||(m[3]=j=>a.value=j),class:"px-3 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:text-gray-200"},[m[19]||(m[19]=e("option",{value:null},"ðŸ·ï¸ All Categories",-1)),(t(!0),o(Y,null,Z(l.categories,j=>(t(),o("option",{key:j.id,value:j.id,title:v(j)},n(j.icon)+" "+n(j.name),9,ui))),128))],512),[[ye,a.value]]),h.value!=="all"||B.value!=="all"||C.value!=="all"||a.value?(t(),o("button",{key:0,onClick:m[4]||(m[4]=j=>{h.value="all",B.value="all",C.value="all",a.value=null}),class:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Clear all filters"}," âœ• Clear ")):y("",!0),m[22]||(m[22]=e("div",{class:"flex-1"},null,-1)),e("div",ci,[e("a",{href:V.route("goals.export.csv"),class:"inline-flex items-center gap-1.5 px-3 py-2 text-sm bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/50 rounded-lg transition-colors",title:"Export CSV"},[...m[20]||(m[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),G(" CSV ",-1)])],8,vi),e("a",{href:V.route("goals.export.pdf"),target:"_blank",class:"inline-flex items-center gap-1.5 px-3 py-2 text-sm bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Export PDF"},[...m[21]||(m[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),G(" PDF ",-1)])],8,xi)])])])):y("",!0),b.value==="visionboard"?(t(),o("div",yi,[e("div",{class:"relative mx-auto transition-all duration-300",style:X({width:r.value+"px",height:d.value+"px"})},[e("div",pi,[e("div",{class:"absolute rounded-full border border-gray-200 dark:border-gray-700 opacity-50",style:X({width:g.value*.8+"px",height:g.value*.8+"px"})},null,4),e("div",{class:"absolute rounded-full border border-gray-200 dark:border-gray-700 opacity-40",style:X({width:g.value*.62+"px",height:g.value*.62+"px"})},null,4),e("div",{class:"absolute rounded-full border border-gray-200 dark:border-gray-700 opacity-30",style:X({width:g.value*.44+"px",height:g.value*.44+"px"})},null,4)]),m[23]||(m[23]=e("div",{class:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none"},[e("div",{class:"text-center sparkle-container"},[e("h1",{class:"text-3xl sm:text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-tr from-yellow-400 via-orange-500 to-red-500 leading-tight"}," VISION "),e("h1",{class:"text-3xl sm:text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-tr from-yellow-400 via-orange-500 to-red-500 leading-tight"}," BOARD "),e("h2",{class:"text-4xl sm:text-5xl md:text-6xl font-black mt-2 text-transparent bg-clip-text bg-gradient-to-tr from-yellow-400 via-orange-500 to-red-500 leading-tight"}," 2026 "),e("span",{class:"star star-1"},"âœ¦"),e("span",{class:"star star-2"},"â˜…"),e("span",{class:"star star-3"},"âœ¦"),e("span",{class:"star star-4"},"â˜…"),e("span",{class:"star star-5"},"âœ¦"),e("p",{class:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-4 sm:mt-6 max-w-xs mx-auto italic"},[G(' "Má»—i ngÃ y Ä‘i má»™t Ä‘oáº¡n nhá», '),e("br"),G("Ä‘á»§ bá»n Ä‘á»ƒ Ä‘i xa, "),e("br"),G('Ä‘á»§ cháº­m Ä‘á»ƒ khÃ´ng bá» quÃªn mÃ¬nh." ')])])],-1)),l.themeWordsEffect==="orbit"||ue.value.length>0?(t(),ke(kt,{key:0,goals:ue.value,words:l.themeWordsEffect==="orbit"?l.themeWords||[]:[],"container-width":r.value,"container-height":d.value,"is-mobile":r.value<500,onGoalClick:O},null,8,["goals","words","container-width","container-height","is-mobile"])):y("",!0),l.themeWordsEffect==="waterfall"?(t(),ke(Bn,{key:1,"container-width":r.value,"container-height":d.value},null,8,["container-width","container-height"])):y("",!0)],4),ue.value.length===0?(t(),o("div",mi,[e("div",bi,[m[25]||(m[25]=e("div",{class:"text-6xl mb-4"},"ðŸŽ¯",-1)),m[26]||(m[26]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"}," No Core Goals ",-1)),m[27]||(m[27]=e("p",{class:"text-gray-500 dark:text-gray-400 mb-6"}," Add up to 3 core goals to orbit your Vision Board! ",-1)),T(c(Me),{href:V.route("goals.create"),class:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors"},{default:le(()=>[...m[24]||(m[24]=[e("span",null,"+",-1),e("span",null,"Add Core Goal",-1)])]),_:1},8,["href"])])])):y("",!0),e("button",{onClick:m[5]||(m[5]=j=>E.value=!E.value),class:$(["absolute bottom-4 right-4 p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:shadow-xl transition-all hover:scale-110 z-10",{"ring-2 ring-indigo-500":E.value}]),title:"Theme Words"},[...m[28]||(m[28]=[e("svg",{class:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)])],2),T(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:le(()=>[E.value?(t(),o("div",fi,[T(Xn,{words:l.themeWords||[],"current-effect":l.themeWordsEffect||"orbit",onClose:m[6]||(m[6]=j=>E.value=!1)},null,8,["words","current-effect"])])):y("",!0)]),_:1})])):y("",!0),b.value==="plan"?(t(),o("div",hi,[ue.value.length>0?(t(),o("div",ki,[m[36]||(m[36]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[G(" ðŸŽ¯ Core Goals "),e("span",{class:"text-sm font-normal text-gray-500 dark:text-gray-400"},"(click to view milestones)")],-1)),e("div",wi,[(t(!0),o(Y,null,Z(ue.value,j=>(t(),o("div",{key:j.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow overflow-hidden"},[e("div",_i,[e("div",$i,[e("div",{onClick:W=>O(j),class:"flex items-center gap-3 cursor-pointer flex-1",title:"Click to edit goal"},[e("span",Mi,n(j.category?.icon),1),e("div",null,[e("h4",Di,n(j.title),1),e("p",Si,n(j.milestones?.length||0)+" milestones ",1)])],8,Ci),e("div",Vi,[e("div",Ti,[e("div",{class:$(["font-bold text-lg",j.progress>=100?"text-green-500":"text-indigo-600 dark:text-indigo-400"])},n(j.progress)+"% ",3),e("div",Bi,[e("div",{class:"h-full bg-indigo-500 rounded-full transition-all duration-500",style:X({width:`${j.progress}%`})},null,4)])]),e("button",{onClick:W=>F(j.id),class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"View milestones"},[(t(),o("svg",{class:$(["w-5 h-5 text-gray-400 transition-transform",{"rotate-180":i.value[j.id]}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...m[29]||(m[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,Li)])])]),z(e("div",ji,[e("div",Fi,[(t(!0),o(Y,null,Z(j.milestones,W=>(t(),o("div",{key:W.id,class:$(["rounded-lg transition-colors",W.is_soft?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":"hover:bg-white dark:hover:bg-gray-800"])},[e("div",Ai,[e("button",{onClick:ae(re=>q(j.id,W),["stop"]),class:$(["w-5 h-5 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0",W.is_completed?"bg-green-500 border-green-500 text-white":W.is_soft?"border-amber-400 dark:border-amber-600 hover:border-amber-500":"border-gray-300 dark:border-gray-600 hover:border-indigo-500"])},[W.is_completed?(t(),o("svg",Ei,[...m[30]||(m[30]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):y("",!0)],10,zi),e("div",Hi,[e("div",Ii,[W.is_soft?(t(),o("span",Ui,"ðŸ””")):y("",!0),e("span",{class:$(W.is_completed?"text-gray-400 line-through":W.is_soft?"text-amber-700 dark:text-amber-300":"text-gray-700 dark:text-gray-300")},n(W.title),3)]),W.memo?(t(),o("div",Pi,[m[31]||(m[31]=e("span",{class:"mr-0.5"},"ðŸ“",-1)),e("span",{class:"memo-content prose prose-xs prose-gray dark:prose-invert max-w-none inline line-clamp-2",innerHTML:P(W.memo)},null,8,Ri)])):y("",!0)]),e("div",Gi,[W.todos?.length?(t(),o("button",{key:0,onClick:ae(re=>S.value[W.id]=!S.value[W.id],["stop"]),class:"text-xs px-1.5 py-0.5 rounded bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-900",title:`${W.todos.filter(re=>re.is_completed).length}/${W.todos.length} todos`}," ðŸ“‹ "+n(W.todos.filter(re=>re.is_completed).length)+"/"+n(W.todos.length),9,Wi)):y("",!0),W.due_date?(t(),o("span",Ni,n(new Date(W.due_date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})),1)):y("",!0)])]),W.todos?.length&&S.value[W.id]?(t(),o("div",qi,[(t(!0),o(Y,null,Z(W.todos,re=>(t(),o("div",{key:re.id,class:"flex items-center gap-2 text-sm p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700/50"},[e("button",{onClick:ae(Ee=>f(j.id,W,re),["stop"]),class:$(["w-4 h-4 rounded border flex items-center justify-center transition-colors flex-shrink-0",re.is_completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-500 hover:border-green-400"])},[re.is_completed?(t(),o("svg",Ki,[...m[32]||(m[32]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):y("",!0)],10,Oi),e("span",{class:$(["flex-1",re.is_completed?"text-gray-400 line-through":"text-gray-600 dark:text-gray-400"])},n(re.title),3),re.end_date?(t(),o("span",Xi," â†’ "+n(new Date(re.end_date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})),1)):y("",!0)]))),128))])):y("",!0)],2))),128)),j.milestones?.length?y("",!0):(t(),o("div",Yi,[m[34]||(m[34]=G(" No milestones yet. ",-1)),T(c(Me),{href:V.route("goals.show",j.id),class:"text-indigo-600 hover:underline"},{default:le(()=>[...m[33]||(m[33]=[G("Add milestones",-1)])]),_:1},8,["href"])]))]),e("div",Ji,[T(c(Me),{href:V.route("goals.show",j.id),class:"text-sm text-indigo-600 dark:text-indigo-400 hover:underline"},{default:le(()=>[...m[35]||(m[35]=[G(" View goal details â†’ ",-1)])]),_:1},8,["href"])])],512),[[de,i.value[j.id]]])]))),128))])])):y("",!0),e("div",Qi,[m[38]||(m[38]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[G(" ðŸ“‹ Other Goals "),e("span",{class:"text-sm font-normal text-gray-500 dark:text-gray-400"},"(drag to reorder)")],-1)),T(c(He),{modelValue:Le.value,"onUpdate:modelValue":m[7]||(m[7]=j=>Le.value=j),"item-key":"id",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6","ghost-class":"opacity-50","drag-class":"shadow-2xl",animation:200,onStart:m[8]||(m[8]=j=>k.value=!0),onEnd:Ie},{item:le(({element:j})=>[xe(j)?(t(),ke(vt,{key:0,goal:j,class:"cursor-grab active:cursor-grabbing",onClick:O},null,8,["goal"])):y("",!0)]),_:1},8,["modelValue"]),ze.value.length===0&&ue.value.length>0?(t(),o("div",Zi,[m[37]||(m[37]=e("div",{class:"text-4xl mb-2"},"ðŸ“",-1)),h.value!=="all"||B.value!=="all"||C.value!=="all"||a.value?(t(),o("p",ed," No goals match the filters. ")):(t(),o("p",td,"No regular goals. All goals are Core Goals!"))])):y("",!0)]),ue.value.length===0&&ze.value.length===0?(t(),o("div",od,[m[40]||(m[40]=e("div",{class:"text-6xl mb-4"},"ðŸŽ¯",-1)),m[41]||(m[41]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"}," No goals yet ",-1)),m[42]||(m[42]=e("p",{class:"text-gray-500 dark:text-gray-400 mb-6"}," Start by adding your first goal! ",-1)),T(c(Me),{href:V.route("goals.create"),class:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors"},{default:le(()=>[...m[39]||(m[39]=[e("span",null,"+",-1),e("span",null,"Add Goal",-1)])]),_:1},8,["href"])])):y("",!0)])):y("",!0)],2)],2),T(Mn,{show:R.value,goal:M.value,onClose:J,onEdit:Q,onDeleted:u},null,8,["show","goal"]),T(Il,{show:L.value,goal:M.value,categories:l.categories,"core-goals-count":H.value,onClose:oe,onSaved:I,onDeleted:u},null,8,["show","goal","categories","core-goals-count"])]),_:2},[b.value==="plan"?{name:"header",fn:le(()=>[e("div",Yn,[m[10]||(m[10]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"}," ðŸŽ¯ v!t's 2026 Vision Board "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," Track your goals and make 2026 your best year! ")],-1)),T(c(Me),{href:V.route("goals.create"),class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors"},{default:le(()=>[...m[9]||(m[9]=[e("span",null,"+",-1),e("span",null,"Add Goal",-1)])]),_:1},8,["href"])])]),key:"0"}:void 0]),1024)],64))}},vd=Ae(sd,[["__scopeId","data-v-f0b7c56c"]]);export{vd as default};
